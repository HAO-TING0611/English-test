<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocab Master - Glassmorphism Ultimate</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;500;700&display=swap');

        :root {
            --bg-color: #111111;
            --glass-bg: rgba(30, 30, 40, 0.6);
            --glass-border: rgba(255, 255, 255, 0.15);
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
            
            --text-main: #ffffff;
            --text-sub: #a0a0a0;
            --accent-color: #60a5fa;
            --accent-glow: rgba(96, 165, 250, 0.4);
            
            --success-color: #34d399;
            --error-color: #f87171;
        }

        body {
            background-color: var(--bg-color);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(40, 40, 50, 0.4) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(20, 20, 30, 0.4) 0%, transparent 40%);
            color: var(--text-main);
            font-family: 'Noto Sans', sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Views */
        .view-section {
            display: none;
            flex: 1;
            flex-direction: column;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
            align-items: center;
        }
        .view-section.active { display: flex; }
        #quiz-screen { justify-content: center; }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-color); }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }

        /* Glass Panel */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow), 0 0 15px rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 40px;
            width: 100%;
            max-width: 800px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        /* Start Screen */
        .hero-title {
            font-size: 3rem; font-weight: 700; margin-bottom: 10px; 
            background: linear-gradient(135deg, #fff 0%, #aaa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -1px;
            text-align: center;
        }
        .hero-subtitle { color: var(--text-sub); margin-bottom: 40px; font-size: 1.1rem; font-weight: 300; text-align: center; }

        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 100%; max-width: 700px; }
        .menu-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            padding: 25px; border-radius: 16px;
            cursor: pointer; transition: all 0.2s; text-align: center;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .menu-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--accent-color);
            box-shadow: 0 0 20px var(--accent-glow);
            transform: translateY(-2px);
        }
        .menu-card h3 { margin: 10px 0 5px 0; font-size: 1.1rem; }
        .menu-card p { margin: 0; font-size: 0.85rem; color: #888; }

        /* Study Mode */
        .study-container { width: 100%; max-width: 800px; }
        .vocab-item { border-bottom: 1px solid rgba(255,255,255,0.1); padding: 25px 0; }
        .vocab-word { font-size: 1.4rem; font-weight: 700; color: var(--accent-color); margin-bottom: 5px; }
        .vocab-sent { 
            color: #ccc; font-style: italic; background: rgba(0,0,0,0.2); 
            padding: 15px; border-radius: 8px; line-height: 1.6; border-left: 3px solid var(--accent-color);
        }
        .vocab-sent strong { color: var(--accent-color); }

        /* Quiz UI */
        #timer {
            position: fixed; top: 20px; right: 30px;
            font-family: 'Noto Sans', monospace; font-size: 1rem; color: var(--text-sub);
            background: rgba(0,0,0,0.3); padding: 5px 12px; border-radius: 8px;
            backdrop-filter: blur(4px); border: 1px solid rgba(255,255,255,0.05); z-index: 100;
        }
        #progress-container { position: fixed; top: 0; left: 0; width: 100%; height: 3px; background: #222; z-index: 100; }
        #progress-bar { height: 100%; background: var(--accent-color); width: 0%; transition: width 0.3s; box-shadow: 0 0 10px var(--accent-color); }

        .question-text { 
            font-size: 1.8rem; line-height: 1.5; font-weight: 500; color: #ffffff; margin-bottom: 25px; text-align: center;
        }

        .btn-toggle {
            background: transparent; border: 1px solid rgba(255,255,255,0.2); 
            color: var(--text-sub); padding: 6px 15px; border-radius: 20px; 
            font-size: 0.9rem; cursor: pointer; margin: 0 auto 20px auto; display: block;
            transition: all 0.2s;
        }
        .btn-toggle:hover { border-color: var(--accent-color); color: #fff; background: rgba(96, 165, 250, 0.1); }
        .trans-box {
            text-align: center; color: var(--text-sub); margin-bottom: 30px; 
            padding: 15px; border-top: 1px dashed rgba(255,255,255,0.1);
            display: none; animation: fadeIn 0.3s;
        }

        .options-grid { display: grid; grid-template-columns: 1fr; gap: 12px; width: 100%; }
        .option-card {
            background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 18px 25px; border-radius: 12px; cursor: pointer; transition: all 0.2s;
            display: flex; align-items: center; font-size: 1.05rem; color: #ddd;
        }
        .option-card:hover { background: rgba(255, 255, 255, 0.08); border-color: #fff; transform: translateX(5px); }
        .option-card.selected { border-color: var(--accent-color); background: rgba(96, 165, 250, 0.1); }
        .option-card.correct { border-color: var(--success-color); color: var(--success-color); background: rgba(52, 211, 153, 0.1); }
        .option-card.wrong { border-color: var(--error-color); color: var(--error-color); background: rgba(248, 113, 113, 0.1); }
        .radio-circle { width: 16px; height: 16px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.3); margin-right: 15px; flex-shrink: 0; }
        .option-card.selected .radio-circle { border-color: var(--accent-color); background: var(--accent-color); box-shadow: 0 0 10px var(--accent-color); }

        .score-big { font-size: 5rem; font-weight: 700; color: #fff; text-shadow: 0 0 30px var(--accent-glow); margin: 20px 0; }
        
        .btn {
            background: var(--accent-color); color: #000; font-weight: 600;
            border: none; padding: 12px 30px; border-radius: 8px; cursor: pointer;
            font-size: 1rem; transition: all 0.2s; box-shadow: 0 0 15px var(--accent-glow);
        }
        .btn:hover { background: #fff; transform: translateY(-2px); box-shadow: 0 0 25px rgba(255,255,255,0.4); }
        .btn-outline {
            background: transparent; border: 1px solid rgba(255,255,255,0.3); color: #fff;
            padding: 10px 25px; border-radius: 8px; cursor: pointer; transition: all 0.2s;
        }
        .btn-outline:hover { border-color: #fff; background: rgba(255,255,255,0.1); }

        .analysis-item { background: rgba(255,255,255,0.03); padding: 20px; border-radius: 8px; margin-bottom: 15px; border-left: 3px solid var(--error-color); text-align: left; }

        /* ÈÅéÂ†¥ÂãïÁï´ */
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(10px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        @keyframes fadeOut { 
            from { opacity: 1; transform: translateY(0); } 
            to { opacity: 0; transform: translateY(-10px); } 
        }
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slideOutLeft {
            from { opacity: 1; transform: translateX(0); }
            to { opacity: 0; transform: translateX(-30px); }
        }
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes scaleOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.95); }
        }

        #question-box {
            animation: slideInRight 0.4s ease-out;
        }
        #question-box.exit {
            animation: slideOutLeft 0.3s ease-in forwards;
        }

        @media (max-width: 600px) { .menu-grid { grid-template-columns: 1fr; } .question-text { font-size: 1.4rem; } }
    </style>
</head>
<body>

    <div id="progress-container"><div id="progress-bar"></div></div>

    <div id="start-screen" class="view-section active" style="justify-content: center;">
        <div class="hero-title">Vocab Master</div>
        <div class="hero-subtitle">Interactive Review System</div>
        
        <div class="menu-grid">
            <div class="menu-card" onclick="startQuiz('vocab')">
                <div style="font-size: 2rem; margin-bottom: 10px; color: #f472b6;">üìù</div>
                <h3>Vocab Unit 11 & 12</h3>
                <p>Standard Vocabulary Test</p>
            </div>
            <div class="menu-card" onclick="startQuiz('reading')">
                <div style="font-size: 2rem; margin-bottom: 10px; color: var(--accent-color);">üìñ</div>
                <h3>Reading Cloze</h3>
                <p>New! Book a Night Tour & Lan Ren Bao</p>
            </div>
            <div class="menu-card" onclick="startStudy()" style="grid-column: span 2;">
                <div style="font-size: 2rem; margin-bottom: 10px; color: #34d399;">üëÅÔ∏è</div>
                <h3>Study Database</h3>
                <p>Review all words and sentences</p>
            </div>
        </div>
    </div>

    <div id="study-screen" class="view-section">
        <div style="width: 100%; max-width: 800px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h2 style="color:#fff; margin:0;">Database</h2>
            <button class="btn-outline" onclick="showHome()">Back</button>
        </div>
        <div id="study-list-container" class="study-container"></div>
    </div>

    <div id="quiz-screen" class="view-section">
        <div id="timer">00:00</div>
        <div class="glass-panel" id="quiz-panel">
            <div id="question-box"></div>
        </div>
    </div>

    <div id="result-screen" class="view-section" style="justify-content: center; text-align: center;">
        <div class="glass-panel">
            <h3 style="color: var(--text-sub); margin-bottom: 0;">Final Score</h3>
            <div class="score-big" id="final-score">0</div>
            <p id="time-taken" style="color: var(--text-sub); margin-bottom: 30px;"></p>
            <div style="text-align: left; max-height: 300px; overflow-y: auto; margin-bottom: 30px; padding-right: 10px;">
                <h4 style="color: #fff; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">Review Mistakes</h4>
                <div id="analysis-container"></div>
            </div>
            <div style="display: flex; gap: 15px; justify-content: center;">
                <button class="btn-outline" onclick="showHome()">Menu</button>
                <button class="btn" onclick="startQuiz(currentMode)">Retry</button>
            </div>
        </div>
    </div>

    <script>
        // --- DATA BANK 1: Vocabulary Unit 11 & 12 ---
        const vocabBank = [
            { id: "T12-MC-1", text: "Jane will make a good teacher, as she has the ______ to explain difficult concepts in simple ways.", translation: "Jane ÊúÉÊàêÁÇ∫Â•ΩËÄÅÂ∏´ÔºåÂõ†ÁÇ∫Â•πÊúâËß£ÈáãÂõ∞Èõ£Ê¶ÇÂøµÁöÑ______„ÄÇ", options: ["pain", "action", "density", "ability"], answer: 3, correctWord: "ability", wordTrans: "ËÉΩÂäõ" },
            { id: "T12-MC-2", text: "The rent for the apartment ______ water and gas, but you have to pay your own electricity bills.", translation: "ÂÖ¨ÂØìÁßüÈáë______Ê∞¥ÂíåÁì¶ÊñØÔºå‰ΩÜ‰Ω†ÂæóËá™Â∑±‰ªòÈõªË≤ª„ÄÇ", options: ["includes", "conflicts", "increases", "communicates"], answer: 0, correctWord: "includes", wordTrans: "ÂåÖÂê´" },
            { id: "T12-MC-3", text: "Edward read the ______ on the bottle before taking the medicine.", translation: "Edward ÊúçËó•ÂâçÈñ±ËÆÄ‰∫ÜÁì∂Â≠ê‰∏äÁöÑ______„ÄÇ", options: ["greetings", "reactions", "insults", "instructions"], answer: 3, correctWord: "instructions", wordTrans: "ÊåáÁ§∫/Ë™™ÊòéÊõ∏" },
            { id: "T12-MC-4", text: "The man is still struggling with his ______ memories of the war, which destroyed everything he treasured.", translation: "ÈÇ£‰∫∫‰ªçÂú®ËàáÊà∞Áà≠ÁöÑ______Ë®òÊÜ∂ÊéôÊâé„ÄÇ", options: ["inactive", "eventual", "painful", "generous"], answer: 2, correctWord: "painful", wordTrans: "ÁóõËã¶ÁöÑ" },
            { id: "T12-MC-5", text: "Poor ______ can lead to misunderstandings at work, which in turn can result in mistakes.", translation: "‰∏çËâØÁöÑ______ÊúÉÂ∞éËá¥Â∑•‰ΩúË™§Ëß£„ÄÇ", options: ["temptation", "communication", "invasion", "admission"], answer: 1, correctWord: "communication", wordTrans: "Ê∫ùÈÄö" },
            { id: "T12-MC-6", text: "The two animal species may look nothing alike, but they actually share a common ______.", translation: "ÈÄôÂÖ©Á®ÆÂãïÁâ©ÁúãËµ∑‰æÜ‰∏çÂÉèÔºå‰ΩÜÊúâÂÖ±ÂêåÁöÑ______„ÄÇ", options: ["pedestrian", "ancestor", "deadline", "grammar"], answer: 1, correctWord: "ancestor", wordTrans: "Á•ñÂÖà" },
            { id: "T12-MC-7", text: "Several accidents happened on the highway because a big fire caused ______ smoke, which blinded drivers.", translation: "Â§ßÁÅ´ÈÄ†Êàê‰∫Ü______ÁÖôÈúßÔºåÈÅÆËîΩ‰∫ÜÈßïÈßõË¶ñÁ∑ö„ÄÇ", options: ["final", "cheap", "able", "dense"], answer: 3, correctWord: "dense", wordTrans: "ÊøÉÂØÜÁöÑ" },
            { id: "T12-MC-8", text: "Melissa hired a personal trainer to ______ her how to become fit and work out properly.", translation: "Melissa ËÅòË´ãÊïôÁ∑¥‰æÜ______Â•πÂ¶Ç‰ΩïÂÅ•Ë∫´„ÄÇ", options: ["instruct", "admit", "react", "greet"], answer: 0, correctWord: "instruct", wordTrans: "ÊåáÂ∞é" },
            { id: "T12-MC-9", text: "In order to meet the tight ______, Owen stayed late in the office for days.", translation: "ÁÇ∫‰∫ÜË∂ï‰∏äÁ∑äËø´ÁöÑ______ÔºåOwen Âú®Ëæ¶ÂÖ¨ÂÆ§ÂæÖ‰∫ÜÂ•ΩÂπæÂ§©„ÄÇ", options: ["generosity", "deadline", "tempted", "search"], answer: 1, correctWord: "deadline", wordTrans: "Êà™Ê≠¢Êó•Êúü" },
            { id: "T12-WB1-1", text: "Kevin ______ his success at school to his wonderful teachers.", translation: "Kevin Êää‰ªñÂú®Â≠∏Ê†°ÁöÑÊàêÂäü______Áµ¶‰ªñÁöÑÂ•ΩËÄÅÂ∏´„ÄÇ", options: ["owes", "insults", "admits", "increases"], answer: 0, correctWord: "owes", wordTrans: "Ê≠∏ÂäüÊñº/Ê¨†" },
            { id: "T12-WB1-2", text: "Parents should not take sides when there's a ______ between their kids.", translation: "Áï∂Â≠©Â≠êÈñìÁôºÁîü______ÊôÇÔºåÁà∂ÊØç‰∏çÊáâÂÅèË¢í„ÄÇ", options: ["deadline", "conflict", "density", "ancestor"], answer: 1, correctWord: "conflict", wordTrans: "Ë°ùÁ™Å" },
            { id: "T12-WB1-3", text: "My ______ left southern China and settled in Taiwan over 100 years ago.", translation: "ÊàëÁöÑ______‰∏ÄÁôæÂ§öÂπ¥ÂâçÈõ¢ÈñãËèØÂçóÂÆöÂ±ÖÂè∞ÁÅ£„ÄÇ", options: ["insults", "conflicts", "ancestors", "emergencies"], answer: 2, correctWord: "ancestors", wordTrans: "Á•ñÂÖà" },
            { id: "T12-WB1-4", text: "Please prepare some medical kits in case of ______.", translation: "Ë´ãÊ∫ñÂÇôÈÜ´Ëó•ÁÆ±‰ª•Èò≤______„ÄÇ", options: ["emergency", "density", "communication", "deadline"], answer: 0, correctWord: "emergency", wordTrans: "Á∑äÊÄ•ÁãÄÊ≥Å" },
            { id: "T12-WB1-5", text: "At first Lucy denied making the mistake, but later she ______ it was her.", translation: "Lucy Ëµ∑ÂàùÂê¶Ë™çÁäØÈåØÔºå‰ΩÜÂæå‰æÜÂ•π______ÊòØÂ•πÂÅöÁöÑ„ÄÇ", options: ["increased", "admitted", "owed", "insulted"], answer: 1, correctWord: "admitted", wordTrans: "ÊâøË™ç" },
            { id: "T12-WB1-6", text: "Lisa worked overtime in order to meet her ______.", translation: "Lisa ÁÇ∫‰∫ÜË∂ï‰∏ä______ËÄåÂä†Áè≠„ÄÇ", options: ["deadline", "density", "conflict", "insult"], answer: 0, correctWord: "deadline", wordTrans: "Êà™Ê≠¢ÊúüÈôê" },
            { id: "T12-WB1-7", text: "This common hand gesture is actually an ______ in France.", translation: "ÈÄôÂÄãÂ∏∏Ë¶ãÊâãÂã¢Âú®Ê≥ïÂúãÂÖ∂ÂØ¶ÊòØ‰∏ÄÁ®Æ______„ÄÇ", options: ["emergency", "admission", "insult", "ancestor"], answer: 2, correctWord: "insult", wordTrans: "‰æÆËæ±" },
            { id: "T12-WB1-8", text: "It's important for couples to ______ what they're feeling to avoid misunderstandings.", translation: "Â§´Â¶ª______ÂΩºÊ≠§ÁöÑÊÑüÂèó‰ª•ÈÅøÂÖçË™§ÊúÉÂæàÈáçË¶Å„ÄÇ", options: ["communicate", "owe", "increase", "conflict"], answer: 0, correctWord: "communicate", wordTrans: "Ê∫ùÈÄö" },
            { id: "T12-WB1-9", text: "Taipei City is crowded because of its high population ______.", translation: "Âè∞ÂåóÂ∏ÇÂõ†ÁÇ∫‰∫∫Âè£______È´òËÄåÊìÅÊì†„ÄÇ", options: ["density", "emergency", "deadline", "ancestor"], answer: 0, correctWord: "density", wordTrans: "ÂØÜÂ∫¶" },
            { id: "T12-WB1-10", text: "Many people think the fine for drunk driving should be ______.", translation: "Ë®±Â§ö‰∫∫Ë™çÁÇ∫ÈÖíÈßïÁΩ∞Ê¨æÊáâË©≤Ë¢´______„ÄÇ", options: ["admitted", "owed", "increased", "communicated"], answer: 2, correctWord: "increased", wordTrans: "Â¢ûÂä†" },
            { id: "T11-MC-1", text: "______ can drive people to commit crimes, such as stealing money from work.", translation: "______ÊúÉÈ©Ö‰Ωø‰∫∫ÁäØÁΩ™Ôºå‰æãÂ¶ÇÂÅ∑Èå¢„ÄÇ", options: ["Height", "Birth", "Price", "Greed"], answer: 3, correctWord: "Greed", wordTrans: "Ë≤™Â©™" },
            { id: "T11-MC-2", text: "______ in 1917, the university is celebrating its 100th anniversary this year.", translation: "______Êñº 1917 Âπ¥ÔºåË©≤Ê†°ÊÖ∂Á•ùÁôæÈÄ±Âπ¥„ÄÇ", options: ["Founded", "Charmed", "Explored", "Colored"], answer: 0, correctWord: "Founded", wordTrans: "ÂâµÁ´ã" },
            { id: "T11-MC-3", text: "The naughty boy ______ his ankle jumping off a high wall.", translation: "È†ëÁöÆÁî∑Â≠©Ë∑≥ÁâÜÊôÇ______ËÖ≥Ë∏ù„ÄÇ", options: ["illustrated", "twisted", "blamed", "repeated"], answer: 1, correctWord: "twisted", wordTrans: "Êâ≠ÂÇ∑" },
            { id: "T11-MC-4", text: "Humor is a ______ quality that draws people like a magnet.", translation: "ÂπΩÈªòÊòØ‰∏ÄÁ®ÆÂÉèÁ£ÅÈêµËà¨Âê∏Âºï‰∫∫ÁöÑ______ÁâπË≥™„ÄÇ", options: ["colorful", "greedy", "charming", "diligent"], answer: 2, correctWord: "charming", wordTrans: "Ëø∑‰∫∫ÁöÑ" },
            { id: "T11-MC-5", text: "The auto company cut down on production costs by using robots to ______ car parts.", translation: "Ê±ΩËªäÂÖ¨Âè∏Áî®Ê©üÂô®‰∫∫______Èõ∂‰ª∂‰ª•Èôç‰ΩéÊàêÊú¨„ÄÇ", options: ["invest", "heighten", "assemble", "absorb"], answer: 2, correctWord: "assemble", wordTrans: "ÁµÑË£ù" },
            { id: "T11-MC-6", text: "Having survived the car accident, the driver is a(n) ______ of how important it is to wear a seatbelt.", translation: "ËªäÁ¶çÂÄñÂ≠òÂæåÔºåÂè∏Ê©üÊàêÁÇ∫Áπ´ÂÆâÂÖ®Â∏∂ÈáçË¶ÅÊÄßÁöÑ______„ÄÇ", options: ["exploration", "foundation", "repetition", "illustration"], answer: 3, correctWord: "illustration", wordTrans: "‰æãË≠â" },
            { id: "T11-MC-7", text: "My ______ to India has changed my impression of the country.", translation: "ÊàëÁöÑÂç∞Â∫¶______ÊîπËÆä‰∫ÜÊàëÂ∞çË©≤ÂúãÁöÑÂç∞Ë±°„ÄÇ", options: ["journey", "layer", "masterwork", "inside"], answer: 0, correctWord: "journey", wordTrans: "ÊóÖÁ®ã" },
            { id: "T11-MC-8", text: "The worker's ______ paid off in the end; his employer appreciated his hard work.", translation: "Â∑•‰∫∫ÁöÑ______ÁµÇÊñºÊúâ‰∫ÜÂõûÂ†±„ÄÇ", options: ["assembly", "diligence", "capability", "investment"], answer: 1, correctWord: "diligence", wordTrans: "Âã§Â•Æ" },
            { id: "T11-MC-9", text: "I'm afraid I didn't hear your question clearly. Could you ______ it one more time?", translation: "ÊàëÊ≤íËÅΩÊ∏ÖÊ•öÔºå‰Ω†ËÉΩ______‰∏ÄÈÅçÂóéÔºü", options: ["arise", "stationary", "invest", "repeat"], answer: 3, correctWord: "repeat", wordTrans: "ÈáçË§á" },
            { id: "T11-WB1-1", text: "These photographs ______ how the environment has changed over the years.", translation: "ÈÄô‰∫õÁÖßÁâá______‰∫ÜÁí∞Â¢ÉÂ§öÂπ¥‰æÜÁöÑËÆäÂåñ„ÄÇ", options: ["illustrate", "blame", "invest", "infect"], answer: 0, correctWord: "illustrate", wordTrans: "Ë™™Êòé/ÊèèÁπ™" },
            { id: "T11-WB1-2", text: "The little girl likes to ______ and learn about the world around her.", translation: "Â∞èÂ•≥Â≠©ÂñúÊ≠°______‰∏¶Â≠∏ÁøíÂë®ÈÅ≠‰∏ñÁïå„ÄÇ", options: ["explore", "absorb", "arise", "blame"], answer: 0, correctWord: "explore", wordTrans: "Êé¢Á¥¢" },
            { id: "T11-WB1-3", text: "All students are expected to attend the school ______ in the morning.", translation: "ÊâÄÊúâÂ≠∏ÁîüÊó©‰∏äÈÉΩË¶ÅÂèÉÂä†Â≠∏Ê†°______„ÄÇ", options: ["assembly", "standard", "investment", "founder"], answer: 0, correctWord: "assembly", wordTrans: "ÈõÜÊúÉ" },
            { id: "T11-WB1-4", text: "Tom used a rag to ______ the water on the table.", translation: "Tom Áî®ÊäπÂ∏É______Ê°å‰∏äÁöÑÊ∞¥„ÄÇ", options: ["absorb", "infect", "illustrate", "explore"], answer: 0, correctWord: "absorb", wordTrans: "Âê∏Êî∂/Êì¶‰πæ" },
            { id: "T11-WB1-5", text: "Bill Gates is famous for being the ______ of Microsoft.", translation: "Bill Gates ‰ª•Ë∫´ÁÇ∫ÂæÆËªü______ËÅûÂêç„ÄÇ", options: ["founder", "assembly", "standard", "blame"], answer: 0, correctWord: "founder", wordTrans: "ÂâµËæ¶‰∫∫" },
            { id: "T11-WB1-6", text: "Jeff always ______ his own problems on other people.", translation: "Jeff Á∏ΩÊòØÊääËá™Â∑±ÁöÑÂïèÈ°å______Áµ¶Âà•‰∫∫„ÄÇ", options: ["blames", "invests", "arises", "infects"], answer: 0, correctWord: "blames", wordTrans: "ÊÄ™ÁΩ™" },
            { id: "T11-WB1-7", text: "Thousands of people were ______ with the flu last year.", translation: "ÂéªÂπ¥ÊúâÊï∏ÂçÉ‰∫∫______ÊµÅÊÑü„ÄÇ", options: ["infected", "explored", "absorbed", "illustrated"], answer: 0, correctWord: "infected", wordTrans: "ÊÑüÊüì" },
            { id: "T11-WB1-8", text: "Peter can work on weekends if the need ______.", translation: "Â¶ÇÊûúÊúâ______ÔºåPeter ÂèØ‰ª•ÈÄ±Êú´Â∑•‰Ωú„ÄÇ", options: ["arises", "blames", "invests", "standards"], answer: 0, correctWord: "arises", wordTrans: "Âá∫Áèæ/ÁôºÁîü" },
            { id: "T11-WB1-9", text: "Mike ______ a quarter of his salary in stocks every month.", translation: "Mike ÊØèÂÄãÊúà______ÂõõÂàÜ‰πã‰∏ÄËñ™Ê∞¥Âú®ËÇ°Á•®„ÄÇ", options: ["invests", "arises", "explores", "absorbs"], answer: 0, correctWord: "invests", wordTrans: "ÊäïË≥á" },
            { id: "T11-WB1-10", text: "Kate is a hard-working student who sets herself high ______.", translation: "Kate ÊòØÂÄãË®≠ÂÆöÈ´ò______ÁöÑÁî®ÂäüÂ≠∏Áîü„ÄÇ", options: ["standards", "assemblies", "founders", "investments"], answer: 0, correctWord: "standards", wordTrans: "Ê®ôÊ∫ñ" },
        ];

        // --- DATA BANK 2: Reading Cloze (New from Images) ---
        const readingBank = [
            // Book a Night Tour (Images 1 & 2)
            { id: "R-01", text: "The National Museum of Marine ______ and Aquarium offers night tours to people.", translation: "ÂúãÁ´ãÊµ∑Ê¥ã______ÂçöÁâ©È§®ÂíåÊ∞¥ÊóèÈ§®Êèê‰æõÂ§úÂÆøË°åÁ®ã„ÄÇ", options: ["Biology", "Memory", "Staff", "Adventure"], answer: 0, correctWord: "Biology", wordTrans: "ÁîüÁâ©Â≠∏" },
            { id: "R-02", text: "Visitors can get a behind-the-scenes look at the aquarium, ______ watching the staff feed animals.", translation: "ÈÅäÂÆ¢ÂèØ‰ª•ÂèÉËßÄÊ∞¥ÊóèÈ§®ÁöÑÂæåÂè∞Ôºå______ÁúãÂ∑•‰Ωú‰∫∫Âì°È§µÈ£üÂãïÁâ©„ÄÇ", options: ["such as", "rely on", "keep in", "tell apart"], answer: 0, correctWord: "such as", wordTrans: "‰æãÂ¶Ç" },
            { id: "R-03", text: "The tickets are likely to be ______ quickly, so hurry up!", translation: "ÈñÄÁ•®ÂæàÂèØËÉΩÊúÉÂæàÂø´______ÔºåÊâÄ‰ª•Ë¶ÅÂø´ÈªûÔºÅ", options: ["sold out", "caught up", "digested", "shortened"], answer: 0, correctWord: "sold out", wordTrans: "ÂîÆÂÆå" },
            { id: "R-04", text: "Jason used to teach biology at a ______, but he retired last year.", translation: "Jason ÊõæÂú®______ÊïôÁîüÁâ©Ôºå‰ΩÜ‰ªñÂéªÂπ¥ÈÄÄ‰ºë‰∫Ü„ÄÇ", options: ["university", "aquarium", "policy", "term"], answer: 0, correctWord: "university", wordTrans: "Â§ßÂ≠∏" },
            { id: "R-05", text: "The guided tour ______ one and a half hours.", translation: "Â∞éË¶ΩË°åÁ®ã______‰∫Ü‰∏ÄÂÄãÂçäÂ∞èÊôÇ„ÄÇ", options: ["lasted", "retired", "digested", "shortened"], answer: 0, correctWord: "lasted", wordTrans: "ÊåÅÁ∫å" },
            { id: "R-06", text: "My favorite ______ of the tour was our visit to the Penguin Island.", translation: "Ê≠§Ë°åÊàëÊúÄÂñúÊ≠°ÁöÑ______ÊòØÊàëÂÄëÂèÉËßÄ‰ºÅÈµùÂ≥∂„ÄÇ", options: ["memory", "biology", "staff", "doubt"], answer: 0, correctWord: "memory", wordTrans: "ÂõûÊÜ∂" },
            { id: "R-07", text: "It was a souvenir of this ______ experience.", translation: "ÈÄôÊòØÈÄôÊ¨°______Á∂ìÊ≠∑ÁöÑÁ¥ÄÂøµÂìÅ„ÄÇ", options: ["unforgettable", "complicated", "frequent", "risky"], answer: 0, correctWord: "unforgettable", wordTrans: "Èõ£ÂøòÁöÑ" },
            { id: "R-08", text: "I watched the whale dance for a few minutes before I ______.", translation: "ÊàëÁúãËëóÈØ®È≠öË∑≥ËàûÂπæÂàÜÈêòÂæåÂ∞±______„ÄÇ", options: ["fell asleep", "hurried up", "caught up", "relied on"], answer: 0, correctWord: "fell asleep", wordTrans: "Áù°Ëëó" },
            { id: "R-09", text: "This ______ made me realize the beauty of marine life.", translation: "ÈÄôÊ¨°______ËÆìÊàëÈ´îÊúÉÂà∞Êµ∑Ê¥ãÁîüÁâ©‰πãÁæé„ÄÇ", options: ["adventure", "term", "amount", "policy"], answer: 0, correctWord: "adventure", wordTrans: "ÂÜíÈö™/Â•áÈÅá" },
            { id: "R-10", text: "We should watch over our oceans for future ______.", translation: "ÊàëÂÄëÊáâË©≤ÁÇ∫Âæå______ÂÆàË≠∑ÊàëÂÄëÁöÑÊµ∑Ê¥ã„ÄÇ", options: ["generations", "creators", "newcomers", "preferences"], answer: 0, correctWord: "generations", wordTrans: "‰∏ñ‰ª£" },
            
            // Lan Ren Bao (Images 3, 4, 5)
            { id: "R-11", text: "Lan Ren Bao usually ______ everything in a short page.", translation: "Êá∂‰∫∫ÂåÖÈÄöÂ∏∏Âú®Áü≠Áü≠‰∏ÄÈ†Å‰∏≠______ÊâÄÊúâÂÖßÂÆπ„ÄÇ", options: ["contains", "digests", "crosses", "shortens"], answer: 0, correctWord: "contains", wordTrans: "ÂåÖÂê´" },
            { id: "R-12", text: "Does the choice of a Lan Ren Bao also ______ your mind very often?", translation: "ÈÅ∏ÊìáÊá∂‰∫∫ÂåÖÈÄôÂÄãÂøµÈ†≠ÊòØÂê¶‰πüÂ∏∏______‰Ω†ÁöÑËÖ¶Êµ∑Ôºü", options: ["cross", "keep", "tell", "rely"], answer: 0, correctWord: "cross", wordTrans: "cross one's mind (ÊÉ≥Âà∞)" },
            { id: "R-13", text: "It is a Chinese ______ for a large amount of information.", translation: "ÈÄôÊòØÂ§ßÈáèË≥áË®äÁöÑ‰∏≠Êñá______„ÄÇ", options: ["term", "staff", "memory", "biology"], answer: 0, correctWord: "term", wordTrans: "Ë°ìË™û/ÂêçË©û" },
            { id: "R-14", text: "It is organized to help people ______ the information easily.", translation: "ÂÆÉÁöÑÁ∑®ÊéíÊòØÁÇ∫‰∫ÜÂπ´Âä©‰∫∫ÂÄëËºïÈ¨Ü______Ë≥áË®ä„ÄÇ", options: ["digest", "retire", "last", "hurry"], answer: 0, correctWord: "digest", wordTrans: "Ê∂àÂåñ/ÁêÜËß£" },
            { id: "R-15", text: "Newcomers often had trouble ______ the discussions.", translation: "Êñ∞ÊâãÂ∏∏Âú®______Ë®éË´ñÈÄ≤Â∫¶‰∏äÊúâÂõ∞Èõ£„ÄÇ", options: ["catching up on", "selling out", "falling asleep", "relying on"], answer: 0, correctWord: "catching up on", wordTrans: "Ë∑ü‰∏ä/Ë∂ï‰∏ä" },
            { id: "R-16", text: "Users gathered information and had them ______ into an article.", translation: "Áî®Êà∂Êî∂ÈõÜË≥áË®ä‰∏¶Â∞áÂÖ∂______Êàê‰∏ÄÁØáÊñáÁ´†„ÄÇ", options: ["shortened", "complicated", "frequent", "unforgettable"], answer: 0, correctWord: "shortened", wordTrans: "Á∏ÆÁü≠/ÊøÉÁ∏Æ" },
            { id: "R-17", text: "You can use an image to ______ different types of bulbs apart.", translation: "‰Ω†ÂèØ‰ª•Áî®ÂúñÁâá‰æÜ______‰∏çÂêåÈ°ûÂûãÁöÑÁáàÊ≥°„ÄÇ", options: ["tell", "take", "make", "keep"], answer: 0, correctWord: "tell", wordTrans: "tell ... apart (ÂàÜËæ®)" },
            { id: "R-18", text: "Organizations use them to explain ______ policies.", translation: "Ê©üÊßãÂà©Áî®ÂÆÉÂÄë‰æÜËß£Èáã______ÁöÑÊîøÁ≠ñ„ÄÇ", options: ["complicated", "unforgettable", "marine", "frequent"], answer: 0, correctWord: "complicated", wordTrans: "Ë§áÈõúÁöÑ" },
            { id: "R-19", text: "It can be risky to ______ Lan Ren Baos as the only way to learn.", translation: "______Êá∂‰∫∫ÂåÖ‰ΩúÁÇ∫Â≠∏ÁøíÁöÑÂîØ‰∏ÄÈÄîÂæëÂèØËÉΩÊòØÊúâÈ¢®Èö™ÁöÑ„ÄÇ", options: ["rely on", "tell apart", "cross mind", "hurry up"], answer: 0, correctWord: "rely on", wordTrans: "‰æùË≥¥" },
            { id: "R-20", text: "Please ______ that the information might not be balanced.", translation: "Ë´ã______Ë≥áË®äÂèØËÉΩ‰∏çÂ§†ÂÖ®Èù¢„ÄÇ", options: ["keep in mind", "fall asleep", "catch up on", "sold out"], answer: 0, correctWord: "keep in mind", wordTrans: "Ë®ò‰Ωè" },
             { id: "R-21", text: "Lan Ren Baos explain policies to correct ______.", translation: "Êá∂‰∫∫ÂåÖËß£ÈáãÊîøÁ≠ñ‰ª•Êõ¥Ê≠£______„ÄÇ", options: ["misunderstandings", "adventures", "generations", "aquariums"], answer: 0, correctWord: "misunderstandings", wordTrans: "Ë™§Ëß£" }
        ];

        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let startTime = 0;
        let timerInterval;
        let isTransShown = false;
        let currentMode = 'vocab';

        function showHome() { switchView('start-screen'); }
        function switchView(viewId) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
        }
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- Study Mode (Combines both banks) ---
        function startStudy() {
            const container = document.getElementById('study-list-container');
            container.innerHTML = ''; 
            
            // Combine and label
            const allQuestions = [...vocabBank, ...readingBank];

            allQuestions.forEach((q, index) => {
                const filledSentence = q.text.replace('______', `<strong>${q.correctWord}</strong>`);
                const item = document.createElement('div');
                item.className = 'vocab-item';
                item.innerHTML = `
                    <div class="vocab-word">${index + 1}. ${q.correctWord} <span style="font-size:1rem; color:#aaa; font-weight:400; margin-left:10px;">${q.wordTrans}</span></div>
                    <div class="vocab-sent">${filledSentence}</div>
                    <div style="color:#666; font-size:0.9rem; margin-top:5px;">${q.translation}</div>
                `;
                container.appendChild(item);
            });
            switchView('study-screen');
        }

        // --- Quiz Mode ---
        function startQuiz(mode) {
            currentMode = mode;
            if (mode === 'vocab') {
                questions = JSON.parse(JSON.stringify(vocabBank));
            } else if (mode === 'reading') {
                questions = JSON.parse(JSON.stringify(readingBank));
            } else {
                questions = JSON.parse(JSON.stringify([...vocabBank, ...readingBank])); // Fallback or All
            }
            
            shuffleArray(questions);
            currentQuestionIndex = 0; score = 0; userAnswers = []; startTime = Date.now();
            startTimer();
            loadQuestion();
            switchView('quiz-screen');
        }

        function startTimer() {
            clearInterval(timerInterval);
            const timerDisplay = document.getElementById('timer');
            timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const min = String(Math.floor(elapsed / 60)).padStart(2, '0');
                const sec = String(elapsed % 60).padStart(2, '0');
                timerDisplay.innerText = `${min}:${sec}`;
            }, 1000);
        }

        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) { endQuiz(); return; }
            const q = questions[currentQuestionIndex];
            const progress = (currentQuestionIndex / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            isTransShown = false;

            const container = document.getElementById('question-box');
            
            // ÁßªÈô§‰πãÂâçÁöÑÂãïÁï´È°ûÂà•
            container.classList.remove('exit');
            
            // Âº∑Âà∂ÈáçÊéíÔºåÁ¢∫‰øùÂãïÁï´ËÉΩÊ≠£Â∏∏Ëß∏Áôº
            void container.offsetWidth;
            
            container.innerHTML = `
                <div class="question-text">${q.text}</div>
                <button class="btn-toggle" onclick="toggleTrans()"><span style="opacity:0.7">üëÅÔ∏è</span> Show Translation</button>
                <div id="q-trans" class="trans-box">${q.translation}</div>
                
                <div class="options-grid">
                    ${q.options.map((opt, idx) => `
                        <div class="option-card" onclick="selectAnswer(${idx})">
                            <div class="radio-circle"></div>
                            <span>${opt}</span>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function toggleTrans() {
            const el = document.getElementById('q-trans');
            isTransShown = !isTransShown;
            el.style.display = isTransShown ? 'block' : 'none';
        }

        function selectAnswer(idx) {
            const q = questions[currentQuestionIndex];
            const cards = document.querySelectorAll('.option-card');
            cards.forEach(c => c.onclick = null);

            let isCorrect = (idx === q.answer);
            if (isCorrect) score++;

            if (isCorrect) {
                cards[idx].classList.add('selected', 'correct');
            } else {
                cards[idx].classList.add('selected', 'wrong');
                cards[q.answer].classList.add('correct');
                cards[q.answer].querySelector('.radio-circle').style.borderColor = 'var(--success-color)';
                cards[q.answer].querySelector('.radio-circle').style.background = 'var(--success-color)';
            }

            userAnswers.push({ question: q, userIdx: idx, isCorrect: isCorrect });
            
            // Êí≠ÊîæÈÄÄÂá∫ÂãïÁï´ÂæåÈÄ≤ÂÖ•‰∏ã‰∏ÄÈ°å
            const container = document.getElementById('question-box');
            container.classList.add('exit');
            
            setTimeout(() => { 
                currentQuestionIndex++;
                loadQuestion(); 
            }, 300);
        }

        function endQuiz() {
            clearInterval(timerInterval);
            document.getElementById('progress-bar').style.width = '100%';
            const finalScore = Math.round((score / questions.length) * 100);
            document.getElementById('final-score').innerText = finalScore;
            
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const min = String(Math.floor(elapsed / 60)).padStart(2, '0');
            const sec = String(elapsed % 60).padStart(2, '0');
            document.getElementById('time-taken').innerText = `Time: ${min}:${sec}`;

            const container = document.getElementById('analysis-container');
            let html = '';
            const wrongAnswers = userAnswers.filter(a => !a.isCorrect);
            
            if (wrongAnswers.length === 0) {
                html = '<div style="color: var(--success-color); padding: 20px; text-align:center;">üéâ Perfect Score! Outstanding.</div>';
            } else {
                wrongAnswers.forEach((item) => {
                    html += `
                        <div class="analysis-item">
                            <div style="color:#fff; margin-bottom:5px; font-weight:600;">${item.question.text}</div>
                            <div style="font-size:0.9rem; color:#aaa; margin-bottom:5px;">${item.question.translation}</div>
                            <div style="font-size:0.9rem;">
                                Your Answer: <span style="color:var(--error-color); font-weight:bold;">${item.question.options[item.userIdx]}</span><br>
                                Correct: <span style="color:var(--success-color); font-weight:bold;">${item.question.options[item.question.answer]}</span>
                            </div>
                        </div>
                    `;
                });
            }
            container.innerHTML = html;
            switchView('result-screen');
        }
    </script>
</body>
</html>
