<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocab Master - Liquid Glass Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap');

        :root {
            /* Liquid Glass Theme Palette */
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #115e59 100%);
            --glass-surface: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.15);
            --glass-highlight: rgba(255, 255, 255, 0.08);
            
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --accent-cyan: #22d3ee;
            --accent-purple: #a78bfa;
            
            --success: #34d399;
            --error: #f87171;
            
            --blob-radius: 24px; /* Soft rounding */
        }

        * { box-sizing: border-box; }

        body {
            background: var(--bg-gradient);
            background-size: 200% 200%;
            animation: gradientMove 15s ease infinite;
            color: var(--text-primary);
            font-family: 'Outfit', 'Noto Sans TC', sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- Liquid Glass Card Style --- */
        .liquid-card {
            background: var(--glass-surface);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: 
                0 8px 32px 0 rgba(0, 0, 0, 0.3),
                inset 0 0 0 1px rgba(255, 255, 255, 0.05);
            border-radius: var(--blob-radius);
            transition: transform 0.3s ease, border-color 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        /* Subtle organic shine effect */
        .liquid-card::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.03) 0%, transparent 60%);
            transform: rotate(30deg); pointer-events: none;
        }

        /* --- Navigation --- */
        #top-nav {
            position: fixed; top: 0; left: 0; width: 100%; height: 70px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 30px; z-index: 1000;
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .nav-brand { font-size: 1.2rem; font-weight: 700; letter-spacing: 1px; background: linear-gradient(to right, #22d3ee, #a78bfa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .hamburger { cursor: pointer; opacity: 0.8; transition: 0.3s; }
        .hamburger span { display: block; width: 24px; height: 2px; background: #fff; margin: 5px 0; border-radius: 2px; }
        .hamburger:hover { opacity: 1; transform: scale(1.1); }

        /* --- Layout --- */
        #main-container {
            margin-top: 70px;
            flex: 1;
            overflow-y: auto;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .view-section {
            display: none;
            width: 100%;
            max-width: 900px;
            animation: floatUp 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }
        .view-section.active { display: block; }

        @keyframes floatUp {
            from { opacity: 0; transform: translateY(30px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* --- Dashboard --- */
        .dash-header { text-align: center; margin-bottom: 50px; }
        .dash-header h1 { font-size: 2.5rem; font-weight: 300; margin: 0 0 10px 0; letter-spacing: -0.5px; }
        .dash-header p { color: var(--text-secondary); font-size: 1.1rem; }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            width: 100%;
        }

        .dash-card {
            padding: 30px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            height: 200px;
            justify-content: space-between;
        }
        .dash-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-cyan);
            box-shadow: 0 15px 40px rgba(34, 211, 238, 0.15);
        }
        
        .card-icon { font-size: 2rem; margin-bottom: 15px; opacity: 0.9; }
        .card-title { font-size: 1.3rem; font-weight: 600; margin-bottom: 8px; }
        .card-desc { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.5; }
        .card-meta { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1.5px; color: var(--accent-purple); font-weight: 700; margin-top: auto; }

        /* --- Study Database --- */
        .db-header { display: flex; justify-content: space-between; margin-bottom: 30px; align-items: center; }
        .db-tabs { display: flex; background: rgba(0,0,0,0.2); padding: 5px; border-radius: 50px; }
        .tab-btn {
            background: none; border: none; color: var(--text-secondary); padding: 8px 20px;
            border-radius: 40px; cursor: pointer; font-size: 0.95rem; transition: 0.3s;
        }
        .tab-btn.active { background: var(--accent-cyan); color: #000; font-weight: 600; box-shadow: 0 4px 15px rgba(34, 211, 238, 0.3); }

        .list-item {
            padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.05);
            display: flex; flex-direction: column; gap: 8px;
        }
        .list-item:last-child { border-bottom: none; }
        .word-h { font-size: 1.2rem; font-weight: 700; color: var(--accent-cyan); }
        .word-trans { font-size: 1rem; color: #fff; margin-left: 10px; font-weight: 400; }
        .word-sent { font-style: italic; color: var(--text-secondary); line-height: 1.6; }

        .article-box { padding: 30px; margin-bottom: 30px; }
        .art-t { font-size: 1.5rem; color: var(--text-primary); margin-bottom: 15px; font-weight: 700; }
        .art-p { white-space: pre-wrap; line-height: 1.8; color: #cbd5e1; margin-bottom: 20px; }
        .art-tr { padding-top: 20px; border-top: 1px dashed rgba(255,255,255,0.2); color: var(--text-secondary); font-size: 0.95rem; line-height: 1.8; }

        /* --- Quiz Interface (Ultra Focused) --- */
        #quiz-progress { position: fixed; top: 70px; left: 0; width: 100%; height: 3px; background: rgba(255,255,255,0.05); }
        #bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent-cyan), var(--accent-purple)); transition: width 0.4s ease; }

        .quiz-info { display: flex; justify-content: space-between; margin-bottom: 30px; font-size: 0.9rem; color: var(--text-secondary); letter-spacing: 1px; }
        
        .question-card {
            padding: 50px 40px; text-align: center; margin-bottom: 30px;
            /* Special Organic Border for Question */
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.01));
        }
        .q-text { font-size: 1.8rem; font-weight: 500; line-height: 1.4; color: #fff; margin-bottom: 25px; }
        
        .trans-btn {
            background: transparent; border: 1px solid rgba(255,255,255,0.2); color: var(--text-secondary);
            padding: 8px 18px; border-radius: 50px; cursor: pointer; font-size: 0.85rem; transition: 0.3s;
        }
        .trans-btn:hover { border-color: var(--accent-cyan); color: var(--accent-cyan); background: rgba(34, 211, 238, 0.05); }
        .trans-text { margin-top: 20px; color: var(--accent-purple); font-size: 1rem; display: none; animation: fadeIn 0.3s; }

        .options-container { display: grid; gap: 15px; }
        .opt-btn {
            width: 100%; padding: 20px 25px; text-align: left;
            background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px; color: #e2e8f0; font-size: 1.1rem; cursor: pointer;
            transition: all 0.2s ease; display: flex; align-items: center;
        }
        .opt-btn:hover { background: rgba(255,255,255,0.08); border-color: #fff; transform: scale(1.01); }
        
        .opt-marker { 
            width: 12px; height: 12px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.3); margin-right: 20px; 
            transition: 0.3s; flex-shrink: 0;
        }

        /* States */
        .opt-btn.selected { border-color: var(--accent-cyan); background: rgba(34, 211, 238, 0.1); color: #fff; }
        .opt-btn.selected .opt-marker { background: var(--accent-cyan); border-color: var(--accent-cyan); box-shadow: 0 0 10px var(--accent-cyan); }
        
        .opt-btn.correct { border-color: var(--success); background: rgba(52, 211, 153, 0.1); color: var(--success); }
        .opt-btn.correct .opt-marker { background: var(--success); border-color: var(--success); }
        
        .opt-btn.wrong { border-color: var(--error); background: rgba(248, 113, 113, 0.1); color: var(--error); }
        .opt-btn.wrong .opt-marker { background: var(--error); border-color: var(--error); }

        /* --- Result --- */
        .score-circle {
            width: 180px; height: 180px; border-radius: 50%; border: 4px solid var(--accent-cyan);
            display: flex; align-items: center; justify-content: center; margin: 0 auto 30px auto;
            font-size: 4rem; font-weight: 700; color: #fff; box-shadow: 0 0 30px rgba(34, 211, 238, 0.2);
            background: rgba(34, 211, 238, 0.05);
        }
        
        .mistake-card {
            background: rgba(248, 113, 113, 0.05); border: 1px solid rgba(248, 113, 113, 0.2);
            padding: 20px; border-radius: 12px; margin-bottom: 15px; text-align: left;
        }

        /* --- Buttons --- */
        .action-btn {
            background: #fff; color: #0f172a; border: none; padding: 12px 35px;
            border-radius: 50px; font-weight: 700; cursor: pointer; font-size: 1rem;
            transition: 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .action-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(255,255,255,0.3); }
        .ghost-btn {
            background: transparent; border: 1px solid rgba(255,255,255,0.3); color: #fff;
            padding: 12px 35px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: 0.3s;
        }
        .ghost-btn:hover { border-color: #fff; background: rgba(255,255,255,0.1); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideOut { to { opacity: 0; transform: translateX(-30px); } }
        
        .exiting { animation: slideOut 0.3s forwards; }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }
    </style>
</head>
<body>

    <nav id="top-nav">
        <div class="hamburger" onclick="showDashboard()">
            <span></span><span></span><span></span>
        </div>
        <div class="nav-brand">VOCAB MASTER</div>
        <div style="width: 24px;"></div>
    </nav>

    <div id="quiz-progress"><div id="bar-fill"></div></div>

    <div id="main-container">

        <div id="view-dashboard" class="view-section active">
            <div class="dash-header">
                <h1>å­¸ç¿’å„€è¡¨æ¿</h1>
                <p>Unit 11 & 12 ç¸½è¤‡ç¿’è¨ˆç•«</p>
            </div>
            
            <div class="dashboard-grid">
                <div class="liquid-card dash-card" onclick="startQuiz('vocab')">
                    <div class="card-icon">ğŸ“</div>
                    <div class="card-title">å–®å­—æ¸¬é©— (Vocab)</div>
                    <div class="card-desc">Unit 11 & 12 å®Œæ•´ 58 é¡Œé«˜é »å–®å­—ï¼ŒåŒ…å«è©ç¾©é…å°èˆ‡æ‹¼å¯«æª¢æŸ¥ã€‚</div>
                    <div class="card-meta">58 Questions</div>
                </div>

                <div class="liquid-card dash-card" onclick="startQuiz('cloze')">
                    <div class="card-icon">ğŸ“–</div>
                    <div class="card-title">èª²æ–‡å…‹æ¼å­— (Cloze)</div>
                    <div class="card-desc">Book a Night Tour & Lan Ren Bao èª²æ–‡æ–‡æ³•èˆ‡å–®å­—å¡«ç©ºã€‚</div>
                    <div class="card-meta">40 Questions (Updated)</div>
                </div>

                <div class="liquid-card dash-card" onclick="startQuiz('comp')">
                    <div class="card-icon">ğŸ’¡</div>
                    <div class="card-title">é–±è®€ç†è§£ (Comp)</div>
                    <div class="card-desc">æ¸¬è©¦å°æ–‡ç« é‚è¼¯èˆ‡ç´°ç¯€çš„æ·±åº¦ç†è§£ã€‚</div>
                    <div class="card-meta">8 Questions</div>
                </div>

                <div class="liquid-card dash-card" onclick="startStudy()">
                    <div class="card-icon">ğŸ“š</div>
                    <div class="card-title">å­¸ç¿’è³‡æ–™åº« (DB)</div>
                    <div class="card-desc">ç€è¦½å®Œæ•´å–®å­—ä¾‹å¥èˆ‡èª²æ–‡ä¸­æ–‡ç¿»è­¯å°ç…§ã€‚</div>
                    <div class="card-meta">Review Mode</div>
                </div>
            </div>
        </div>

        <div id="view-study" class="view-section">
            <div class="db-header">
                <div class="db-tabs">
                    <button class="tab-btn active" onclick="filterStudy(this, 'all')">å…¨éƒ¨</button>
                    <button class="tab-btn" onclick="filterStudy(this, 'vocab')">å–®å­—åº«</button>
                    <button class="tab-btn" onclick="filterStudy(this, 'article')">èª²æ–‡</button>
                </div>
                <button class="ghost-btn" style="padding: 8px 20px;" onclick="showDashboard()">é—œé–‰</button>
            </div>
            <div id="study-content"></div>
        </div>

        <div id="view-quiz" class="view-section">
            <div class="quiz-info">
                <span>QUESTION <span id="q-current">1</span> / <span id="q-total">10</span></span>
                <span id="timer">00:00</span>
            </div>
            <div id="question-box"></div>
        </div>

        <div id="view-result" class="view-section" style="text-align: center;">
            <div class="liquid-card" style="padding: 50px;">
                <div class="score-circle" id="final-score">0</div>
                <h2 style="margin:0; font-weight:300;">æ¸¬é©—å®Œæˆ</h2>
                <p style="color:var(--text-secondary); margin-bottom: 30px;" id="time-taken"></p>
                
                <div style="display: flex; justify-content: center; gap: 20px;">
                    <button class="ghost-btn" onclick="showDashboard()">å›å„€è¡¨æ¿</button>
                    <button class="action-btn" onclick="retryQuiz()">å†æ¸¬ä¸€æ¬¡</button>
                </div>
            </div>
            
            <div style="margin-top: 40px; text-align: left;">
                <h3 style="color:var(--text-primary); margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">éŒ¯é¡Œæª¢è¨</h3>
                <div id="mistake-container"></div>
            </div>
        </div>

    </div>

    <script>
        // --- 1. å®Œæ•´å–®å­—é¡Œåº« (58é¡Œ) ---
        const vocabBank = [
            { id: "T12-MC-1", text: "Jane will make a good teacher, as she has the ______ to explain difficult concepts in simple ways.", translation: "Jane æœƒæˆç‚ºå¥½è€å¸«ï¼Œå› ç‚ºå¥¹æœ‰è§£é‡‹å›°é›£æ¦‚å¿µçš„______ã€‚", options: ["pain", "action", "density", "ability"], answer: 3, correctWord: "ability", wordTrans: "èƒ½åŠ›" },
            { id: "T12-MC-2", text: "The rent for the apartment ______ water and gas, but you have to pay your own electricity bills.", translation: "å…¬å¯“ç§Ÿé‡‘______æ°´å’Œç“¦æ–¯ï¼Œä½†ä½ å¾—è‡ªå·±ä»˜é›»è²»ã€‚", options: ["includes", "conflicts", "increases", "communicates"], answer: 0, correctWord: "includes", wordTrans: "åŒ…å«" },
            { id: "T12-MC-3", text: "Edward read the ______ on the bottle before taking the medicine.", translation: "Edward æœè—¥å‰é–±è®€äº†ç“¶å­ä¸Šçš„______ã€‚", options: ["greetings", "reactions", "insults", "instructions"], answer: 3, correctWord: "instructions", wordTrans: "æŒ‡ç¤º/èªªæ˜æ›¸" },
            { id: "T12-MC-4", text: "The man is still struggling with his ______ memories of the war, which destroyed everything he treasured.", translation: "é‚£äººä»åœ¨èˆ‡æˆ°çˆ­çš„______è¨˜æ†¶æ™æ‰ã€‚", options: ["inactive", "eventual", "painful", "generous"], answer: 2, correctWord: "painful", wordTrans: "ç—›è‹¦çš„" },
            { id: "T12-MC-5", text: "Poor ______ can lead to misunderstandings at work, which in turn can result in mistakes.", translation: "ä¸è‰¯çš„______æœƒå°è‡´å·¥ä½œèª¤è§£ã€‚", options: ["temptation", "communication", "invasion", "admission"], answer: 1, correctWord: "communication", wordTrans: "æºé€š" },
            { id: "T12-MC-6", text: "The two animal species may look nothing alike, but they actually share a common ______.", translation: "é€™å…©ç¨®å‹•ç‰©çœ‹èµ·ä¾†ä¸åƒï¼Œä½†æœ‰å…±åŒçš„______ã€‚", options: ["pedestrian", "ancestor", "deadline", "grammar"], answer: 1, correctWord: "ancestor", wordTrans: "ç¥–å…ˆ" },
            { id: "T12-MC-7", text: "Several accidents happened on the highway because a big fire caused ______ smoke, which blinded drivers.", translation: "å¤§ç«é€ æˆäº†______ç…™éœ§ï¼Œé®è”½äº†é§•é§›è¦–ç·šã€‚", options: ["final", "cheap", "able", "dense"], answer: 3, correctWord: "dense", wordTrans: "æ¿ƒå¯†çš„" },
            { id: "T12-MC-8", text: "Melissa hired a personal trainer to ______ her how to become fit and work out properly.", translation: "Melissa è˜è«‹æ•™ç·´ä¾†______å¥¹å¦‚ä½•å¥èº«ã€‚", options: ["instruct", "admit", "react", "greet"], answer: 0, correctWord: "instruct", wordTrans: "æŒ‡å°" },
            { id: "T12-MC-9", text: "In order to meet the tight ______, Owen stayed late in the office for days.", translation: "ç‚ºäº†è¶•ä¸Šç·Šè¿«çš„______ï¼ŒOwen åœ¨è¾¦å…¬å®¤å¾…äº†å¥½å¹¾å¤©ã€‚", options: ["generosity", "deadline", "tempted", "search"], answer: 1, correctWord: "deadline", wordTrans: "æˆªæ­¢æ—¥æœŸ" },
            { id: "T12-WB1-1", text: "Kevin ______ his success at school to his wonderful teachers.", translation: "Kevin æŠŠä»–åœ¨å­¸æ ¡çš„æˆåŠŸ______çµ¦ä»–çš„å¥½è€å¸«ã€‚", options: ["owes", "insults", "admits", "increases"], answer: 0, correctWord: "owes", wordTrans: "æ­¸åŠŸæ–¼/æ¬ " },
            { id: "T12-WB1-2", text: "Parents should not take sides when there's a ______ between their kids.", translation: "ç•¶å­©å­é–“ç™¼ç”Ÿ______æ™‚ï¼Œçˆ¶æ¯ä¸æ‡‰åè¢’ã€‚", options: ["deadline", "conflict", "density", "ancestor"], answer: 1, correctWord: "conflict", wordTrans: "è¡çª" },
            { id: "T12-WB1-3", text: "My ______ left southern China and settled in Taiwan over 100 years ago.", translation: "æˆ‘çš„______ä¸€ç™¾å¤šå¹´å‰é›¢é–‹è¯å—å®šå±…å°ç£ã€‚", options: ["insults", "conflicts", "ancestors", "emergencies"], answer: 2, correctWord: "ancestors", wordTrans: "ç¥–å…ˆ" },
            { id: "T12-WB1-4", text: "Please prepare some medical kits in case of ______.", translation: "è«‹æº–å‚™é†«è—¥ç®±ä»¥é˜²______ã€‚", options: ["emergency", "density", "communication", "deadline"], answer: 0, correctWord: "emergency", wordTrans: "ç·Šæ€¥ç‹€æ³" },
            { id: "T12-WB1-5", text: "At first Lucy denied making the mistake, but later she ______ it was her.", translation: "Lucy èµ·åˆå¦èªçŠ¯éŒ¯ï¼Œä½†å¾Œä¾†å¥¹______æ˜¯å¥¹åšçš„ã€‚", options: ["increased", "admitted", "owed", "insulted"], answer: 1, correctWord: "admitted", wordTrans: "æ‰¿èª" },
            { id: "T12-WB1-6", text: "Lisa worked overtime in order to meet her ______.", translation: "Lisa ç‚ºäº†è¶•ä¸Š______è€ŒåŠ ç­ã€‚", options: ["deadline", "density", "conflict", "insult"], answer: 0, correctWord: "deadline", wordTrans: "æˆªæ­¢æœŸé™" },
            { id: "T12-WB1-7", text: "This common hand gesture is actually an ______ in France.", translation: "é€™å€‹å¸¸è¦‹æ‰‹å‹¢åœ¨æ³•åœ‹å…¶å¯¦æ˜¯ä¸€ç¨®______ã€‚", options: ["emergency", "admission", "insult", "ancestor"], answer: 2, correctWord: "insult", wordTrans: "ä¾®è¾±" },
            { id: "T12-WB1-8", text: "It's important for couples to ______ what they're feeling to avoid misunderstandings.", translation: "å¤«å¦»______å½¼æ­¤çš„æ„Ÿå—ä»¥é¿å…èª¤æœƒå¾ˆé‡è¦ã€‚", options: ["communicate", "owe", "increase", "conflict"], answer: 0, correctWord: "communicate", wordTrans: "æºé€š" },
            { id: "T12-WB1-9", text: "Taipei City is crowded because of its high population ______.", translation: "å°åŒ—å¸‚å› ç‚ºäººå£______é«˜è€Œæ“æ“ ã€‚", options: ["density", "emergency", "deadline", "ancestor"], answer: 0, correctWord: "density", wordTrans: "å¯†åº¦" },
            { id: "T12-WB1-10", text: "Many people think the fine for drunk driving should be ______.", translation: "è¨±å¤šäººèªç‚ºé…’é§•ç½°æ¬¾æ‡‰è©²è¢«______ã€‚", options: ["admitted", "owed", "increased", "communicated"], answer: 2, correctWord: "increased", wordTrans: "å¢åŠ " },
            { id: "T12-WB2-1", text: "The child is very ______ and always shares his toys with other children.", translation: "é€™å­©å­éå¸¸______ï¼Œç¸½æ˜¯åˆ†äº«ç©å…·ã€‚", options: ["generous", "inactive", "regular", "misinterpreted"], answer: 0, correctWord: "generous", wordTrans: "æ…·æ…¨çš„" },
            { id: "T12-WB2-2", text: "According to scientific research, our brains are not completely ______ when we are sleeping.", translation: "ç ”ç©¶é¡¯ç¤ºï¼Œæˆ‘å€‘ç¡è¦ºæ™‚å¤§è…¦ä¸¦éå®Œå…¨______ã€‚", options: ["individual", "regular", "inactive", "risen"], answer: 2, correctWord: "inactive", wordTrans: "ä¸æ´»èºçš„" },
            { id: "T12-WB2-3", text: "The old man goes to the hospital for ______ checkups.", translation: "é€™ä½è€äººå»é†«é™¢åš______æª¢æŸ¥ã€‚", options: ["regular", "eventual", "tempting", "inactive"], answer: 0, correctWord: "regular", wordTrans: "å®šæœŸçš„" },
            { id: "T12-WB2-4", text: "Though it took him years of hard work, Peter ______ obtained his medical degree.", translation: "é›–ç„¶èŠ±äº†å¾ˆå¤šå¹´åŠªåŠ›ï¼ŒPeter ______ç²å¾—äº†é†«å­¸å­¸ä½ã€‚", options: ["eventually", "individually", "regularly", "generously"], answer: 0, correctWord: "eventually", wordTrans: "æœ€çµ‚" },
            { id: "T12-WB2-5", text: "The hotel always tries to satisfy its VIP guests' ______ needs as best as it can.", translation: "é£¯åº—ç¸½æ˜¯ç›¡åŠ›æ»¿è¶³ VIP å®¢äººçš„______éœ€æ±‚ã€‚", options: ["inactive", "individual", "pedestrian", "misinterpreted"], answer: 1, correctWord: "individual", wordTrans: "å€‹äººçš„" },
            { id: "T12-WB2-6", text: "I have to resist the ______ to eat cheeseburgers because I am on a diet.", translation: "å› ç‚ºåœ¨ç¯€é£Ÿï¼Œæˆ‘å¿…é ˆæŠµæŠ—åƒèµ·å¸æ¼¢å ¡çš„______ã€‚", options: ["temptation", "search", "rise", "pedestrian"], answer: 0, correctWord: "temptation", wordTrans: "èª˜æƒ‘" },
            { id: "T12-WB2-7", text: "Many people move to the city in ______ of better job opportunities.", translation: "è¨±å¤šäººæ¬åˆ°åŸå¸‚______æ›´å¥½çš„å·¥ä½œæ©Ÿæœƒã€‚", options: ["search", "rise", "temptation", "regular"], answer: 0, correctWord: "search", wordTrans: "å°‹æ‰¾" },
            { id: "T12-WB2-8", text: "The housing prices in this area have ______ sharply in recent years.", translation: "é€™ä¸€å€çš„æˆ¿åƒ¹è¿‘å¹´ä¾†æ€¥åŠ‡______ã€‚", options: ["risen", "searched", "misinterpreted", "inactivated"], answer: 0, correctWord: "risen", wordTrans: "ä¸Šæ¼²" },
            { id: "T12-WB2-9", text: "______ should keep to the sidewalks for their own safety.", translation: "______ç‚ºäº†å®‰å…¨æ‡‰è©²èµ°åœ¨äººè¡Œé“ä¸Šã€‚", options: ["Pedestrians", "Individuals", "Searches", "Temptations"], answer: 0, correctWord: "Pedestrians", wordTrans: "è¡Œäºº" },
            { id: "T12-WB2-10", text: "The singer was upset that his words were ______ by the press.", translation: "æ­Œæ‰‹å°ä»–çš„è©±è¢«åª’é«”______æ„Ÿåˆ°ä¸é«˜èˆˆã€‚", options: ["misinterpreted", "risen", "generated", "searched"], answer: 0, correctWord: "misinterpreted", wordTrans: "èª¤è§£" },
            { id: "T11-MC-1", text: "______ can drive people to commit crimes, such as stealing money from work.", translation: "______æœƒé©…ä½¿äººçŠ¯ç½ªï¼Œä¾‹å¦‚å·éŒ¢ã€‚", options: ["Height", "Birth", "Price", "Greed"], answer: 3, correctWord: "Greed", wordTrans: "è²ªå©ª" },
            { id: "T11-MC-2", text: "______ in 1917, the university is celebrating its 100th anniversary this year.", translation: "______æ–¼ 1917 å¹´ï¼Œè©²æ ¡æ…¶ç¥ç™¾é€±å¹´ã€‚", options: ["Founded", "Charmed", "Explored", "Colored"], answer: 0, correctWord: "Founded", wordTrans: "å‰µç«‹" },
            { id: "T11-MC-3", text: "The naughty boy ______ his ankle jumping off a high wall.", translation: "é ‘çš®ç”·å­©è·³ç‰†æ™‚______è…³è¸ã€‚", options: ["illustrated", "twisted", "blamed", "repeated"], answer: 1, correctWord: "twisted", wordTrans: "æ‰­å‚·" },
            { id: "T11-MC-4", text: "Humor is a ______ quality that draws people like a magnet.", translation: "å¹½é»˜æ˜¯ä¸€ç¨®åƒç£éµèˆ¬å¸å¼•äººçš„______ç‰¹è³ªã€‚", options: ["colorful", "greedy", "charming", "diligent"], answer: 2, correctWord: "charming", wordTrans: "è¿·äººçš„" },
            { id: "T11-MC-5", text: "The auto company cut down on production costs by using robots to ______ car parts.", translation: "æ±½è»Šå…¬å¸ç”¨æ©Ÿå™¨äºº______é›¶ä»¶ä»¥é™ä½æˆæœ¬ã€‚", options: ["invest", "heighten", "assemble", "absorb"], answer: 2, correctWord: "assemble", wordTrans: "çµ„è£" },
            { id: "T11-MC-6", text: "Having survived the car accident, the driver is a(n) ______ of how important it is to wear a seatbelt.", translation: "è»Šç¦å€–å­˜å¾Œï¼Œå¸æ©Ÿæˆç‚ºç¹«å®‰å…¨å¸¶é‡è¦æ€§çš„______ã€‚", options: ["exploration", "foundation", "repetition", "illustration"], answer: 3, correctWord: "illustration", wordTrans: "ä¾‹è­‰" },
            { id: "T11-MC-7", text: "My ______ to India has changed my impression of the country.", translation: "æˆ‘çš„å°åº¦______æ”¹è®Šäº†æˆ‘å°è©²åœ‹çš„å°è±¡ã€‚", options: ["journey", "layer", "masterwork", "inside"], answer: 0, correctWord: "journey", wordTrans: "æ—…ç¨‹" },
            { id: "T11-MC-8", text: "The worker's ______ paid off in the end; his employer appreciated his hard work.", translation: "å·¥äººçš„______çµ‚æ–¼æœ‰äº†å›å ±ã€‚", options: ["assembly", "diligence", "capability", "investment"], answer: 1, correctWord: "diligence", wordTrans: "å‹¤å¥®" },
            { id: "T11-MC-9", text: "I'm afraid I didn't hear your question clearly. Could you ______ it one more time?", translation: "æˆ‘æ²’è½æ¸…æ¥šï¼Œä½ èƒ½______ä¸€éå—ï¼Ÿ", options: ["arise", "stationary", "invest", "repeat"], answer: 3, correctWord: "repeat", wordTrans: "é‡è¤‡" },
            { id: "T11-WB1-1", text: "These photographs ______ how the environment has changed over the years.", translation: "é€™äº›ç…§ç‰‡______äº†ç’°å¢ƒå¤šå¹´ä¾†çš„è®ŠåŒ–ã€‚", options: ["illustrate", "blame", "invest", "infect"], answer: 0, correctWord: "illustrate", wordTrans: "èªªæ˜/æç¹ª" },
            { id: "T11-WB1-2", text: "The little girl likes to ______ and learn about the world around her.", translation: "å°å¥³å­©å–œæ­¡______ä¸¦å­¸ç¿’å‘¨é­ä¸–ç•Œã€‚", options: ["explore", "absorb", "arise", "blame"], answer: 0, correctWord: "explore", wordTrans: "æ¢ç´¢" },
            { id: "T11-WB1-3", text: "All students are expected to attend the school ______ in the morning.", translation: "æ‰€æœ‰å­¸ç”Ÿæ—©ä¸Šéƒ½è¦åƒåŠ å­¸æ ¡______ã€‚", options: ["assembly", "standard", "investment", "founder"], answer: 0, correctWord: "assembly", wordTrans: "é›†æœƒ" },
            { id: "T11-WB1-4", text: "Tom used a rag to ______ the water on the table.", translation: "Tom ç”¨æŠ¹å¸ƒ______æ¡Œä¸Šçš„æ°´ã€‚", options: ["absorb", "infect", "illustrate", "explore"], answer: 0, correctWord: "absorb", wordTrans: "å¸æ”¶/æ“¦ä¹¾" },
            { id: "T11-WB1-5", text: "Bill Gates is famous for being the ______ of Microsoft.", translation: "Bill Gates ä»¥èº«ç‚ºå¾®è»Ÿ______èåã€‚", options: ["founder", "assembly", "standard", "blame"], answer: 0, correctWord: "founder", wordTrans: "å‰µè¾¦äºº" },
            { id: "T11-WB1-6", text: "Jeff always ______ his own problems on other people.", translation: "Jeff ç¸½æ˜¯æŠŠè‡ªå·±çš„å•é¡Œ______çµ¦åˆ¥äººã€‚", options: ["blames", "invests", "arises", "infects"], answer: 0, correctWord: "blames", wordTrans: "æ€ªç½ª" },
            { id: "T11-WB1-7", text: "Thousands of people were ______ with the flu last year.", translation: "å»å¹´æœ‰æ•¸åƒäºº______æµæ„Ÿã€‚", options: ["infected", "explored", "absorbed", "illustrated"], answer: 0, correctWord: "infected", wordTrans: "æ„ŸæŸ“" },
            { id: "T11-WB1-8", text: "Peter can work on weekends if the need ______.", translation: "å¦‚æœæœ‰______ï¼ŒPeter å¯ä»¥é€±æœ«å·¥ä½œã€‚", options: ["arises", "blames", "invests", "standards"], answer: 0, correctWord: "arises", wordTrans: "å‡ºç¾/ç™¼ç”Ÿ" },
            { id: "T11-WB1-9", text: "Mike ______ a quarter of his salary in stocks every month.", translation: "Mike æ¯å€‹æœˆ______å››åˆ†ä¹‹ä¸€è–ªæ°´åœ¨è‚¡ç¥¨ã€‚", options: ["invests", "arises", "explores", "absorbs"], answer: 0, correctWord: "invests", wordTrans: "æŠ•è³‡" },
            { id: "T11-WB1-10", text: "Kate is a hard-working student who sets herself high ______.", translation: "Kate æ˜¯å€‹è¨­å®šé«˜______çš„ç”¨åŠŸå­¸ç”Ÿã€‚", options: ["standards", "assemblies", "founders", "investments"], answer: 0, correctWord: "standards", wordTrans: "æ¨™æº–" },
            { id: "T11-WB2-1", text: "Nina finds imported fruits too expensive, so she only buys ______ ones.", translation: "Nina è¦ºå¾—é€²å£æ°´æœå¤ªè²´ï¼Œåªè²·______çš„ã€‚", options: ["domestic", "stationary", "capable", "twisted"], answer: 0, correctWord: "domestic", wordTrans: "åœ‹å…§çš„" },
            { id: "T11-WB2-2", text: "Not everybody is ______ of giving a speech before a large crowd.", translation: "ä¸æ˜¯æ¯å€‹äººéƒ½______åœ¨å¤§çœ¾é¢å‰æ¼”è¬›ã€‚", options: ["capable", "greedy", "diligent", "glorious"], answer: 0, correctWord: "capable", wordTrans: "æœ‰èƒ½åŠ›çš„" },
            { id: "T11-WB2-3", text: "Tanya deserves to be promoted because she is a ______ and efficient employee.", translation: "Tanya å€¼å¾—å‡é·ï¼Œå› ç‚ºå¥¹æ˜¯å€‹______ä¸”æœ‰æ•ˆç‡çš„å“¡å·¥ã€‚", options: ["diligent", "stationary", "twisted", "domestic"], answer: 0, correctWord: "diligent", wordTrans: "å‹¤å‹‰çš„" },
            { id: "T11-WB2-4", text: "Jason is always bragging about his ______ past to his coworkers.", translation: "Jason ç¸½å‘åŒäº‹å¹å™“ä»–______çš„éå»ã€‚", options: ["glorious", "greedy", "stationary", "capable"], answer: 0, correctWord: "glorious", wordTrans: "å…‰æ¦®çš„" },
            { id: "T11-WB2-5", text: "Many girls consider Timothy ______ because he always acts like a gentleman.", translation: "è¨±å¤šå¥³ç”Ÿè¦ºå¾— Timothy ______ï¼Œå› ç‚ºä»–èˆ‰æ­¢åƒç´³å£«ã€‚", options: ["charming", "twisted", "greedy", "domestic"], answer: 0, correctWord: "charming", wordTrans: "è¿·äººçš„" },
            { id: "T11-WB2-6", text: "The Mona Lisa is widely considered one of Leonardo da Vinci's ______.", translation: "è’™å¨œéº—èè¢«å»£æ³›èªç‚ºæ˜¯é”æ–‡è¥¿çš„______ä¹‹ä¸€ã€‚", options: ["masterworks", "prices", "standards", "capabilities"], answer: 0, correctWord: "masterworks", wordTrans: "å‚‘ä½œ" },
            { id: "T11-WB2-7", text: "The ______ businessman is never satisfied with his profits.", translation: "é€™ä½______çš„å•†äººå°åˆ©æ½¤å¾ä¸æ»¿è¶³ã€‚", options: ["greedy", "diligent", "capable", "glorious"], answer: 0, correctWord: "greedy", wordTrans: "è²ªå©ªçš„" },
            { id: "T11-WB2-8", text: "There were so many cars on the road that the traffic was almost ______.", translation: "è·¯ä¸Šè»Šå¤ªå¤šï¼Œäº¤é€šå¹¾ä¹______ã€‚", options: ["stationary", "domestic", "twisted", "greedy"], answer: 0, correctWord: "stationary", wordTrans: "éœæ­¢çš„" },
            { id: "T11-WB2-9", text: "Larry's ______ ankle caused him pain for days.", translation: "Larry ______çš„è…³è¸è®“ä»–ç—›äº†å¥½å¹¾å¤©ã€‚", options: ["twisted", "capable", "diligent", "stationary"], answer: 0, correctWord: "twisted", wordTrans: "æ‰­å‚·" },
            { id: "T11-WB2-10", text: "I bought this dress at a lower ______ because the store was having a sale.", translation: "å› ç‚ºç‰¹è³£ï¼Œæˆ‘ç”¨è¼ƒä½çš„______è²·äº†é€™ä»¶æ´‹è£ã€‚", options: ["price", "masterwork", "standard", "greedy"], answer: 0, correctWord: "price", wordTrans: "åƒ¹æ ¼" }
        ];

        // --- 2. èª²æ–‡å…‹æ¼å­— (Cloze) - UPDATED with NEW QUESTIONS ---
        const clozeBank = [
            // Lan Ren Bao (Bold & Key words)
            { id: "C01", text: "A Lan Ren Bao usually ______ everything in a short page.", translation: "æ‡¶äººåŒ…é€šå¸¸åœ¨çŸ­çŸ­ä¸€é ä¸­______æ‰€æœ‰å…§å®¹ã€‚", options: ["contains", "digests", "crosses", "shortens"], answer: 0, correctWord: "contains", wordTrans: "åŒ…å«" },
            { id: "C02", text: "Does the choice of a Lan Ren Bao also ______ your mind very often?", translation: "é¸æ“‡æ‡¶äººåŒ…é€™å€‹å¿µé ­æ˜¯å¦ä¹Ÿå¸¸______ä½ çš„è…¦æµ·ï¼Ÿ", options: ["cross", "keep", "tell", "rely"], answer: 0, correctWord: "cross", wordTrans: "cross one's mind (æƒ³åˆ°)" },
            { id: "C03", text: "Lan Ren Bao is a Chinese ______ for a large amount of information.", translation: "æ‡¶äººåŒ…æ˜¯å¤§é‡è³‡è¨Šçš„ä¸­æ–‡______ã€‚", options: ["term", "staff", "memory", "biology"], answer: 0, correctWord: "term", wordTrans: "è¡“èª/åè©" },
            { id: "C04", text: "It is organized to help people ______ it easily.", translation: "å®ƒçš„ç·¨æ’æ˜¯ç‚ºäº†å¹«åŠ©äººå€‘è¼•é¬†______å®ƒã€‚", options: ["digest", "retire", "last", "hurry"], answer: 0, correctWord: "digest", wordTrans: "æ¶ˆåŒ–/ç†è§£" },
            { id: "C05", text: "It gives an overview of a large ______ of information.", translation: "å®ƒæä¾›å¤§______è³‡è¨Šçš„æ¦‚è¦½ã€‚", options: ["amount", "variety", "plot", "doubt"], answer: 0, correctWord: "amount", wordTrans: "æ•¸é‡" },
            { id: "C06", text: "Many newcomers often had trouble ______ the discussions.", translation: "è¨±å¤šæ–°æ‰‹å¸¸åœ¨______è¨è«–é€²åº¦ä¸Šæœ‰å›°é›£ã€‚", options: ["catching up on", "selling out", "falling asleep", "relying on"], answer: 0, correctWord: "catching up on", wordTrans: "è·Ÿä¸Š/è¶•ä¸Š" },
            { id: "C07", text: "Users gathered information and had them ______ into an article.", translation: "ç”¨æˆ¶æ”¶é›†è³‡è¨Šä¸¦å°‡å…¶______æˆä¸€ç¯‡æ–‡ç« ã€‚", options: ["shortened", "complicated", "frequent", "unforgettable"], answer: 0, correctWord: "shortened", wordTrans: "ç¸®çŸ­" },
            { id: "C08", text: "There are a ______ of themes for Lan Ren Baos.", translation: "æ‡¶äººåŒ…æœ‰å„å¼å„æ¨£çš„______ã€‚", options: ["variety", "plot", "bulb", "doubt"], answer: 0, correctWord: "variety", wordTrans: "å¤šæ¨£åŒ–/ç¨®é¡" },
            { id: "C09", text: "For example, you may want to watch a Marvel ______.", translation: "ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³çœ‹ä¸€éƒ¨æ¼«å¨______ã€‚", options: ["film", "term", "policy", "staff"], answer: 0, correctWord: "film", wordTrans: "é›»å½±" },
            { id: "C10", text: "It can help you understand the ______ of movies.", translation: "å®ƒå¯ä»¥å¹«ä½ äº†è§£é›»å½±çš„______ã€‚", options: ["plots", "terms", "staff", "policies"], answer: 0, correctWord: "plots", wordTrans: "æƒ…ç¯€" },
            { id: "C11", text: "You can use an image to ______ different types of bulbs apart.", translation: "ä½ å¯ä»¥ç”¨åœ–ç‰‡ä¾†______ä¸åŒé¡å‹çš„ç‡ˆæ³¡ã€‚", options: ["tell", "take", "make", "keep"], answer: 0, correctWord: "tell", wordTrans: "tell ... apart (åˆ†è¾¨)" },
            { id: "C12", text: "______ a doubt, getting information is convenient.", translation: "æ¯«ç„¡______åœ°ï¼Œç²å–è³‡è¨Šå¾ˆæ–¹ä¾¿ã€‚", options: ["Without", " Within", "Under", "Above"], answer: 0, correctWord: "Without", wordTrans: "Without a doubt (ç„¡åº¸ç½®ç–‘)" },
            { id: "C13", text: "Organizations use them to explain ______ policies.", translation: "æ©Ÿæ§‹åˆ©ç”¨å®ƒå€‘ä¾†è§£é‡‹______çš„æ”¿ç­–ã€‚", options: ["complicated", "unforgettable", "marine", "frequent"], answer: 0, correctWord: "complicated", wordTrans: "è¤‡é›œçš„" },
            { id: "C14", text: "Ren Baos are used to correct ______.", translation: "æ‡¶äººåŒ…è¢«ç”¨ä¾†æ›´æ­£______ã€‚", options: ["misunderstandings", "adventures", "generations", "aquariums"], answer: 0, correctWord: "misunderstandings", wordTrans: "èª¤è§£" },
            { id: "C15", text: "Information may be influenced by creators' personal ______.", translation: "è³‡è¨Šå¯èƒ½æœƒå—åˆ°å‰µä½œè€…å€‹äºº______çš„å½±éŸ¿ã€‚", options: ["preferences", "amounts", "varieties", "memories"], answer: 0, correctWord: "preferences", wordTrans: "åå¥½" },
            { id: "C16", text: "It can be ______ to rely on Lan Ren Baos.", translation: "ä¾è³´æ‡¶äººåŒ…å¯èƒ½æ˜¯______ã€‚", options: ["risky", "available", "unique", "frequent"], answer: 0, correctWord: "risky", wordTrans: "æœ‰é¢¨éšªçš„" },
            { id: "C17", text: "You should ______ that information might not be balanced.", translation: "ä½ æ‡‰è©²______è³‡è¨Šå¯èƒ½ä¸å¤ å…¨é¢ã€‚", options: ["keep in mind", "fall asleep", "catch up on", "sold out"], answer: 0, correctWord: "keep in mind", wordTrans: "è¨˜ä½" },
            // NEW Lan Ren Bao Questions from Images
            { id: "C31", text: "The Lan Ren Bao was created for those who couldn't follow the long discussions ______ on PTT.", translation: "æ‡¶äººåŒ…æ˜¯ç‚ºäº†é‚£äº›ç„¡æ³•è·Ÿä¸Š PTT é•·ç¯‡è¨è«–çš„äººå‰µé€ çš„ã€‚", options: ["taken place", "taking place", "took place", "to take place"], answer: 1, correctWord: "taking place", wordTrans: "æ­£åœ¨ç™¼ç”Ÿçš„" },
            { id: "C32", text: "______ themes, they have been highly popular.", translation: "______ä¸»é¡Œï¼Œå®ƒå€‘ä¸€ç›´å¾ˆå—æ­¡è¿ã€‚", options: ["With", "For", "By", "As"], answer: 0, correctWord: "With", wordTrans: "æœ‰äº†..." },
            { id: "C33", text: "Among them, blogs and short videos are the most common ______.", translation: "å…¶ä¸­ï¼Œéƒ¨è½æ ¼å’ŒçŸ­ç‰‡æ˜¯æœ€å¸¸è¦‹çš„______ã€‚", options: ["ones", "forms", "types", "pieces"], answer: 0, correctWord: "ones", wordTrans: "ç¨®é¡/å€‹" },
            
            // Night Tour (Bold & Key words)
            { id: "C18", text: "Jason used to teach ______ at a university.", translation: "Jason æ›¾åœ¨å¤§å­¸æ•™______ã€‚", options: ["biology", "history", "math", "art"], answer: 0, correctWord: "biology", wordTrans: "ç”Ÿç‰©å­¸" },
            { id: "C19", text: "He taught at a ______ before he retired.", translation: "ä»–åœ¨é€€ä¼‘å‰åœ¨______ä»»æ•™ã€‚", options: ["university", "aquarium", "museum", "high school"], answer: 0, correctWord: "university", wordTrans: "å¤§å­¸" },
            { id: "C20", text: "He ______ last year.", translation: "ä»–å»å¹´______äº†ã€‚", options: ["retired", "lasted", "contained", "gathered"], answer: 0, correctWord: "retired", wordTrans: "é€€ä¼‘" },
            { id: "C21", text: "The guided tour ______ one and a half hours.", translation: "å°è¦½è¡Œç¨‹______äº†ä¸€å€‹åŠå°æ™‚ã€‚", options: ["lasted", "shortened", "digested", "hurried"], answer: 0, correctWord: "lasted", wordTrans: "æŒçºŒ" },
            { id: "C22", text: "My favorite ______ of the tour was our visit to Penguin Island.", translation: "æ­¤è¡Œæˆ‘æœ€å–œæ­¡çš„______æ˜¯æˆ‘å€‘åƒè§€ä¼éµå³¶ã€‚", options: ["memory", "biology", "staff", "doubt"], answer: 0, correctWord: "memory", wordTrans: "å›æ†¶" },
            { id: "C23", text: "It was a souvenir of this ______ experience.", translation: "é€™æ˜¯é€™æ¬¡______ç¶“æ­·çš„ç´€å¿µå“ã€‚", options: ["unforgettable", "complicated", "frequent", "risky"], answer: 0, correctWord: "unforgettable", wordTrans: "é›£å¿˜çš„" },
            { id: "C24", text: "I watched the whale dance before I ______.", translation: "æˆ‘çœ‹è‘—é¯¨é­šè·³èˆç›´åˆ°æˆ‘______ã€‚", options: ["fell asleep", "hurried up", "caught up", "relied on"], answer: 0, correctWord: "fell asleep", wordTrans: "ç¡è‘—" },
            { id: "C25", text: "This ______ made me realize the beauty of marine life.", translation: "é€™æ¬¡______è®“æˆ‘é«”æœƒåˆ°æµ·æ´‹ç”Ÿç‰©ä¹‹ç¾ã€‚", options: ["adventure", "term", "amount", "policy"], answer: 0, correctWord: "adventure", wordTrans: "å†’éšª/å¥‡é‡" },
            { id: "C26", text: "We should watch over our oceans for future ______.", translation: "æˆ‘å€‘æ‡‰è©²ç‚ºå¾Œ______å®ˆè­·æˆ‘å€‘çš„æµ·æ´‹ã€‚", options: ["generations", "creators", "newcomers", "preferences"], answer: 0, correctWord: "generations", wordTrans: "ä¸–ä»£" },
            { id: "C27", text: "Visitors can get a ______ look at the aquarium.", translation: "éŠå®¢å¯ä»¥åƒè§€æ°´æ—é¤¨çš„______ã€‚", options: ["behind-the-scenes", "cross-mind", "long-term", "short-term"], answer: 0, correctWord: "behind-the-scenes", wordTrans: "å¹•å¾Œ/å¾Œå°" },
            { id: "C28", text: "Activities include interacting with ocean ______.", translation: "æ´»å‹•åŒ…æ‹¬èˆ‡æµ·æ´‹______äº’å‹•ã€‚", options: ["creatures", "bulbs", "plots", "policies"], answer: 0, correctWord: "creatures", wordTrans: "ç”Ÿç‰©" },
            { id: "C29", text: "The discounted tickets are likely to be ______ quickly.", translation: "å„ªæƒ ç¥¨å¾ˆå¯èƒ½å¾ˆå¿«å°±æœƒ______ã€‚", options: ["sold out", "caught up", "told apart", "kept in mind"], answer: 0, correctWord: "sold out", wordTrans: "å”®å®Œ" },
            { id: "C30", text: "So ______! Book your night tour today!", translation: "æ‰€ä»¥______ï¼ä»Šå¤©å°±é è¨‚ä½ çš„å¤œå®¿è¡Œç¨‹ï¼", options: ["hurry up", "rely on", "fall asleep", "watch over"], answer: 0, correctWord: "hurry up", wordTrans: "å¿«é»" },
            // NEW Night Tour Questions from Images
            { id: "C34", text: "Have you ever thought of sleeping next to a whale to see ______ it feels like?", translation: "ä½ æœ‰æ²’æœ‰æƒ³éç¡åœ¨é¯¨é­šæ—é‚Šï¼Œçœ‹çœ‹æ„Ÿè¦º______ï¼Ÿ", options: ["what", "how", "that", "which"], answer: 0, correctWord: "what", wordTrans: "ä»€éº¼" },
            { id: "C35", text: "You may watch them being fed ______ the employees.", translation: "ä½ å¯ä»¥çœ‹è‘—ç‰ å€‘è¢«å“¡å·¥______ã€‚", options: ["by", "with", "for", "to"], answer: 0, correctWord: "by", wordTrans: "è¢«" },
            { id: "C36", text: "If you are looking for fun and ______ experiences.", translation: "å¦‚æœä½ æ­£åœ¨å°‹æ‰¾æ¨‚è¶£å’Œ______é«”é©—ã€‚", options: ["educational", "boring", "scary", "balanced"], answer: 0, correctWord: "educational", wordTrans: "æ•™è‚²æ€§çš„" },
            { id: "C37", text: "Discounted tickets are now ______.", translation: "å„ªæƒ ç¥¨ç¾åœ¨______ã€‚", options: ["available", "risky", "frequent", "complicated"], answer: 0, correctWord: "available", wordTrans: "å¯ç²å¾—çš„" },
            { id: "C38", text: "They are likely to ______ soon!", translation: "å®ƒå€‘å¾ˆå¯èƒ½å¾ˆå¿«______ï¼", options: ["be sold out", "sell out", "sold out", "selling out"], answer: 0, correctWord: "be sold out", wordTrans: "è¢«å”®å®Œ" },
            { id: "C39", text: "Ivy found a Lan Ren Bao... it didn't cross my ______.", translation: "Ivy æ‰¾åˆ°äº†ä¸€å€‹æ‡¶äººåŒ…... æˆ‘æ²’______éã€‚", options: ["mind", "head", "brain", "thought"], answer: 0, correctWord: "mind", wordTrans: "è…¦æµ·" }
        ];

        // --- 3. é–±è®€ç†è§£ (Comprehension) ---
        const compBank = [
            { id: "R01", text: "In the 'Night Tour' article, where did the author spend the night?", translation: "åœ¨ã€Œå¤œå®¿ã€æ–‡ç« ä¸­ï¼Œä½œè€…åœ¨å“ªè£¡éå¤œï¼Ÿ", options: ["Next to the Whale Pool", "In the Underwater Tunnel", "At the Penguin Island", "In the Touch Pool"], answer: 0, correctWord: "Next to the Whale Pool", wordTrans: "é¯¨é­šæ± æ—" },
            { id: "R02", text: "Who was Jason in the 'Night Tour' diary?", translation: "æ—¥è¨˜ä¸­çš„ Jason æ˜¯èª°ï¼Ÿ", options: ["A tour guide and former teacher", "A student visiting the museum", "A staff member feeding penguins", "The author's father"], answer: 0, correctWord: "A tour guide", wordTrans: "å°éŠ(å‰å¤§å­¸è€å¸«)" },
            { id: "R03", text: "What is the main purpose of a 'Lan Ren Bao'?", translation: "ã€Œæ‡¶äººåŒ…ã€çš„ä¸»è¦ç›®çš„æ˜¯ä»€éº¼ï¼Ÿ", options: ["To help people digest info easily", "To teach people how to cook", "To sell more newspapers", "To make policies more complicated"], answer: 0, correctWord: "To help digest info", wordTrans: "å¹«åŠ©æ¶ˆåŒ–è³‡è¨Š" },
            { id: "R04", text: "When and where did the term 'Lan Ren Bao' start?", translation: "ã€Œæ‡¶äººåŒ…ã€ä¸€è©ä½•æ™‚ä½•åœ°é–‹å§‹ï¼Ÿ", options: ["2007 on PTT (Taiwan)", "2010 on Facebook (USA)", "1999 on Yahoo (Japan)", "2020 on Instagram (UK)"], answer: 0, correctWord: "2007 on PTT", wordTrans: "2007å¹´å°ç£PTT" },
            { id: "R05", text: "Why might 'Lan Ren Baos' be risky?", translation: "ç‚ºä»€éº¼ã€Œæ‡¶äººåŒ…ã€å¯èƒ½æœ‰é¢¨éšªï¼Ÿ", options: ["Info might be unbalanced/biased", "They are too expensive", "They are too long to read", "They are only for children"], answer: 0, correctWord: "Info might be unbalanced", wordTrans: "è³‡è¨Šå¯èƒ½ä¸å¹³è¡¡/åé —" },
            { id: "R06", text: "What does the phrase 'tell apart' mean in the text?", translation: "æ–‡ä¸­ 'tell apart' æ˜¯ä»€éº¼æ„æ€ï¼Ÿ", options: ["To distinguish/identify difference", "To speak separately", "To break into pieces", "To tell a secret"], answer: 0, correctWord: "To distinguish", wordTrans: "åˆ†è¾¨/å€åˆ†" },
            { id: "R07", text: "According to the text, what should you do with info from Lan Ren Baos?", translation: "æ ¹æ“šèª²æ–‡ï¼Œä½ æ‡‰è©²å°æ‡¶äººåŒ…çš„è³‡è¨Šåšä»€éº¼ï¼Ÿ", options: ["Double-check before trusting", "Memorize it immediately", "Share it without reading", "Delete it right away"], answer: 0, correctWord: "Double-check", wordTrans: "å†æ¬¡æŸ¥è­‰" },
            { id: "R08", text: "What did the author enjoy watching at the beginning of the Night Tour?", translation: "ä½œè€…åœ¨å¤œå®¿è¡Œç¨‹ä¸€é–‹å§‹å–œæ­¡çœ‹ä»€éº¼ï¼Ÿ", options: ["Colorful fish swimming", "Sharks eating dinner", "Sea turtles sleeping", "Penguins jumping"], answer: 0, correctWord: "Colorful fish", wordTrans: "äº”é¡å…­è‰²çš„é­š" }
        ];

        // --- 4. Articles (Updated Content) ---
        const articles = [
            {
                title: "Lan Ren Bao (æ‡¶äººåŒ…)",
                text: "\"I'm going to Hualien tomorrow, but I have no idea where to go and what to eat,\" Frank said. \"If I were you, I would search for a Lan Ren Bao. It usually contains everything in a short page,\" his friend replied.\n\nDoes the choice of a Lan Ren Bao also cross your mind very often? Lan Ren Bao is a Chinese term for a large amount of information that has been organized to help people digest it easily. People can use it to quickly get an overview of an unfamiliar subject.\n\nIn 2007, the idea of a Lan Ren Bao started in Taiwan, and this term became popular on PTT, a social networking site. The PTT users found that many newcomers often had trouble catching up on the discussions that were taking place. Thus, some kind users gathered all the pieces of information and had them shortened into an article for the newcomers to read.\n\nAs time passed, many other types of Lan Ren Baos have been created. Short videos, blogs, and pictures are some of the most common ones. Also, there are a variety of themes for Lan Ren Baos. For example, you may want to try watching a Marvel film for the first time. In this case, a fifteen-minute Lan Ren Bao video can help you understand the plots of more than twenty Marvel movies. Or an inexperienced janitor can use a Lan Ren Bao image to tell different types of light bulbs apart within just a few seconds.\n\nWithout a doubt, getting information from a Lan Ren Bao is a lot more convenient. For some people, their lives would definitely be harder if they didn't use Lan Ren Baos so often. Organizations like the government also make Lan Ren Baos to explain complicated policies or to correct misunderstandings.\n\nHowever, Lan Ren Baos may be influenced by their creators' personal preferences. Therefore, some people worry that the information they contain may not be truly balanced. As a result, it can be risky to rely on Lan Ren Baos as the only way to learn something new.\n\nAre you a frequent user of Lan Ren Baos? If so, keep in mind that while Lan Ren Baos can be useful to learn about something quickly, you should double-check them before completely trusting the information they offer.",
                translation: "ã€Œæˆ‘æ˜å¤©è¦å»èŠ±è“®ï¼Œä½†æˆ‘ä¸çŸ¥é“å»å“ªè£¡ï¼Œåƒä»€éº¼ï¼Œã€Frank èªªã€‚ã€Œå¦‚æœæˆ‘æ˜¯ä½ ï¼Œæˆ‘æœƒæœå°‹æ‡¶äººåŒ…ã€‚å®ƒé€šå¸¸åœ¨çŸ­çŸ­ä¸€é ä¸­åŒ…å«æ‰€æœ‰å…§å®¹ï¼Œã€ä»–çš„æœ‹å‹å›ç­”ã€‚\n\né¸æ“‡æ‡¶äººåŒ…é€™å€‹å¿µé ­æ˜¯å¦ä¹Ÿå¸¸é–ƒéä½ çš„è…¦æµ·ï¼Ÿã€Œæ‡¶äººåŒ…ã€æ˜¯ä¸€å€‹ä¸­æ–‡è¡“èªï¼ŒæŒ‡çš„æ˜¯ç‚ºäº†å¹«åŠ©äººå€‘è¼•é¬†æ¶ˆåŒ–è€Œæ•´ç†éçš„å¤§é‡è³‡è¨Šã€‚äººå€‘å¯ä»¥ç”¨å®ƒä¾†å¿«é€Ÿäº†è§£ä¸€å€‹ä¸ç†Ÿæ‚‰çš„ä¸»é¡Œæ¦‚æ³ã€‚\n\n2007å¹´ï¼Œæ‡¶äººåŒ…çš„æ¦‚å¿µèµ·æºæ–¼å°ç£ï¼Œä¸¦åœ¨ç¤¾ç¾¤ç¶²ç«™ PTT ä¸Šæµè¡Œèµ·ä¾†ã€‚PTT ç”¨æˆ¶ç™¼ç¾è¨±å¤šæ–°æ‰‹å¸¸åœ¨è·Ÿä¸Šè¨è«–é€²åº¦ä¸Šæœ‰å›°é›£ã€‚å› æ­¤ï¼Œä¸€äº›å¥½å¿ƒçš„ç”¨æˆ¶æ”¶é›†äº†æ‰€æœ‰è³‡è¨Šç‰‡æ®µï¼Œä¸¦å°‡å…¶ç¸®çŸ­æˆä¸€ç¯‡æ–‡ç« ä¾›æ–°æ‰‹é–±è®€ã€‚\n\néš¨è‘—æ™‚é–“æ¨ç§»ï¼Œè¨±å¤šå…¶ä»–é¡å‹çš„æ‡¶äººåŒ…è¢«å‰µé€ å‡ºä¾†ã€‚çŸ­ç‰‡ã€éƒ¨è½æ ¼å’Œåœ–ç‰‡æ˜¯æœ€å¸¸è¦‹çš„å¹¾ç¨®ã€‚æ­¤å¤–ï¼Œæ‡¶äººåŒ…çš„ä¸»é¡Œä¹Ÿäº”èŠ±å…«é–€ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³ç¬¬ä¸€æ¬¡å˜—è©¦çœ‹æ¼«å¨é›»å½±ã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œä¸€å€‹15åˆ†é˜çš„æ‡¶äººåŒ…å½±ç‰‡å¯ä»¥å¹«åŠ©ä½ äº†è§£è¶…é20éƒ¨æ¼«å¨é›»å½±çš„æƒ…ç¯€ã€‚æˆ–è€…ï¼Œä¸€å€‹æ²’ç¶“é©—çš„æ¸…æ½”å·¥å¯ä»¥ç”¨æ‡¶äººåŒ…åœ–ç‰‡åœ¨å¹¾ç§’é˜å…§åˆ†è¾¨å‡ºä¸åŒé¡å‹çš„ç‡ˆæ³¡ã€‚\n\næ¯«ç„¡ç–‘å•ï¼Œå¾æ‡¶äººåŒ…ç²å–è³‡è¨Šæ–¹ä¾¿å¾—å¤šã€‚å°æŸäº›äººä¾†èªªï¼Œå¦‚æœä¸å¸¸ä½¿ç”¨æ‡¶äººåŒ…ï¼Œç”Ÿæ´»è‚¯å®šæœƒæ›´è‰±é›£ã€‚åƒæ”¿åºœé€™æ¨£çš„æ©Ÿæ§‹ä¹Ÿè£½ä½œæ‡¶äººåŒ…ä¾†è§£é‡‹è¤‡é›œçš„æ”¿ç­–æˆ–æ›´æ­£èª¤è§£ã€‚\n\nç„¶è€Œï¼Œæ‡¶äººåŒ…å¯èƒ½æœƒå—åˆ°å‰µä½œè€…å€‹äººåå¥½çš„å½±éŸ¿ã€‚å› æ­¤ï¼Œæœ‰äº›äººæ“”å¿ƒå…¶ä¸­åŒ…å«çš„è³‡è¨Šå¯èƒ½ä¸å¤ å…¨é¢ï¼ˆå¹³è¡¡ï¼‰ã€‚å› æ­¤ï¼Œä¾è³´æ‡¶äººåŒ…ä½œç‚ºå­¸ç¿’æ–°äº‹ç‰©çš„å”¯ä¸€é€”å¾‘å¯èƒ½æ˜¯æœ‰é¢¨éšªçš„ã€‚\n\nä½ æ˜¯æ‡¶äººåŒ…çš„å¸¸å®¢å—ï¼Ÿå¦‚æœæ˜¯ï¼Œè«‹è¨˜ä½ï¼Œé›–ç„¶æ‡¶äººåŒ…å°æ–¼å¿«é€Ÿäº†è§£æŸäº‹å¾ˆæœ‰ç”¨ï¼Œä½†åœ¨å®Œå…¨ä¿¡ä»»å…¶æä¾›çš„è³‡è¨Šä¹‹å‰ï¼Œä½ æ‡‰è©²å†æ¬¡æŸ¥è­‰ã€‚"
            },
            {
                title: "Night Tour: Schedule (å¤œå®¿è¡Œç¨‹è¡¨)",
                text: "Time: All year\nRegular fee: NT$2,480 / adult; NT$1,190 / child\nEarly-bird discount: NT$2,080 / adult; NT$790 / child\n\nSchedule:\n16:20 Arrival at the museum\n16:30 Guided tour begins: Underwater Tunnel, Whale Pool\n17:00 Touch Pool\n17:30 Penguin Island\n18:00 Guided tour ends: dinner and free time\n19:00 DIY course: make your own souvenir\n20:00 Enjoy late-night snacks and a big-screen movie\n22:00 Bedtime\n\nNotice:\nGuests can choose where to sleep. Sleeping bags and pillows will be provided.\nThe lights will be turned off at 12:30 a.m.\nDon't forget to bring a change of clothes, a toothbrush, and toothpaste.",
                translation: "æ™‚é–“ï¼šå…¨å¹´\nåŸåƒ¹ï¼šæˆäºº NT$2,480 / å…’ç«¥ NT$1,190\næ—©é³¥å„ªæƒ ï¼šæˆäºº NT$2,080 / å…’ç«¥ NT$790\n\nè¡Œç¨‹è¡¨ï¼š\n16:20 æŠµé”åšç‰©é¤¨\n16:30 å°è¦½é–‹å§‹ï¼šæµ·åº•éš§é“ã€é¯¨é­šæ± \n17:00 è§¸æ‘¸æ± \n17:30 ä¼éµå³¶\n18:00 å°è¦½çµæŸï¼šæ™šé¤èˆ‡è‡ªç”±æ™‚é–“\n19:00 DIY èª²ç¨‹ï¼šè£½ä½œè‡ªå·±çš„ç´€å¿µå“\n20:00 äº«ç”¨å®µå¤œèˆ‡å¤§è¢å¹•é›»å½±\n22:00 å°±å¯¢\n\næ³¨æ„äº‹é …ï¼š\néŠå®¢å¯é¸æ“‡ç¡è¦ºåœ°é»ã€‚å°‡æä¾›ç¡è¢‹å’Œæ•é ­ã€‚\nç‡ˆå…‰å°‡æ–¼å‡Œæ™¨ 12:30 ç†„æ»…ã€‚\nåˆ¥å¿˜äº†å¸¶æ›æ´—è¡£ç‰©ã€ç‰™åˆ·å’Œç‰™è†ã€‚"
            },
            {
                title: "Night Tour: Dear Diary (æ—¥è¨˜)",
                text: "Dear Diary,\nLast night, I went on a night tour at the National Museum of Marine Biology and Aquarium. The tour only cost me NT$2,080 because I had bought a discounted ticket online a few months before.\n\nOur tour guide, Jason, knew everything about marine animals. He used to teach biology at a university, but he retired last year. The guided tour lasted one and a half hours, and we spent about thirty minutes looking at each display. At the beginning of the tour, I enjoyed watching colorful fish swimming among the rocks and water plants in the Underwater Tunnel.\n\nThen, we got to the Touch Pool. I thought that we wouldn't be able to touch anything in the museum, but Jason said we could gently touch the sea animals there. I had always wondered what sea animals felt like, so I was quite excited. The crabs, starfish, and sea cucumbers felt strange but amazing. My favorite memory of the tour was our visit to the Penguin Island. I was surprised that the penguins could swim underwater so well. I could never get tired of watching them. After dinner, I even made my own sand painting of the island. It was a souvenir of this unforgettable experience.\n\nAt night, I slept on the floor next to the Whale Pool. I watched the whale dance in the water for a few minutes before I fell asleep. This adventure made me realize the beauty of marine life.",
                translation: "è¦ªæ„›çš„æ—¥è¨˜ï¼Œ\næ˜¨æ™šï¼Œæˆ‘å»åœ‹ç«‹æµ·æ´‹ç”Ÿç‰©åšç‰©é¤¨å’Œæ°´æ—é¤¨åƒåŠ äº†å¤œå®¿è¡Œç¨‹ã€‚é€™æ¬¡è¡Œç¨‹åªèŠ±äº†æˆ‘ NT$2,080ï¼Œå› ç‚ºå¹¾å€‹æœˆå‰æˆ‘åœ¨ç¶²ä¸Šè²·äº†å„ªæƒ ç¥¨ã€‚\n\næˆ‘å€‘çš„å°éŠ Jason å°æµ·æ´‹å‹•ç‰©ç„¡æ‰€ä¸çŸ¥ã€‚ä»–æ›¾ç¶“åœ¨å¤§å­¸æ•™ç”Ÿç‰©ï¼Œä½†å»å¹´é€€ä¼‘äº†ã€‚å°è¦½è¡Œç¨‹æŒçºŒäº†ä¸€å€‹åŠå°æ™‚ï¼Œæˆ‘å€‘åœ¨æ¯å€‹å±•ç¤ºå€å¤§ç´„åœç•™äº†ä¸‰ååˆ†é˜ã€‚åœ¨è¡Œç¨‹é–‹å§‹æ™‚ï¼Œæˆ‘å¾ˆäº«å—åœ¨æµ·åº•éš§é“è§€çœ‹äº”é¡å…­è‰²çš„é­šåœ¨å²©çŸ³å’Œæ°´è‰é–“æ¸¸å‹•ã€‚\n\næ¥è‘—æˆ‘å€‘åˆ°äº†è§¸æ‘¸æ± ã€‚æˆ‘ä»¥ç‚ºæˆ‘å€‘ä¸èƒ½è§¸æ‘¸åšç‰©é¤¨è£¡çš„ä»»ä½•æ±è¥¿ï¼Œä½† Jason èªªæˆ‘å€‘å¯ä»¥è¼•è¼•è§¸æ‘¸é‚£è£¡çš„æµ·ç”Ÿå‹•ç‰©ã€‚æˆ‘ä¸€ç›´æƒ³çŸ¥é“æµ·ç”Ÿå‹•ç‰©æ‘¸èµ·ä¾†æ˜¯ä»€éº¼æ„Ÿè¦ºï¼Œæ‰€ä»¥æˆ‘éå¸¸èˆˆå¥®ã€‚èƒèŸ¹ã€æµ·æ˜Ÿå’Œæµ·åƒæ‘¸èµ·ä¾†å¾ˆå¥‡æ€ªä½†å¾ˆå¥‡å¦™ã€‚æ­¤è¡Œæˆ‘æœ€å–œæ­¡çš„å›æ†¶æ˜¯åƒè§€ä¼éµå³¶ã€‚æˆ‘å¾ˆé©šè¨ä¼éµåœ¨æ°´ä¸‹èƒ½æ¸¸å¾—é€™éº¼å¥½ã€‚æˆ‘æ°¸é çœ‹ä¸è†©ç‰ å€‘ã€‚æ™šé¤å¾Œï¼Œæˆ‘ç”šè‡³è£½ä½œäº†è‡ªå·±çš„å³¶å¶¼æ²™ç•«ã€‚é€™æ˜¯é€™æ¬¡é›£å¿˜ç¶“æ­·çš„ç´€å¿µå“ã€‚\n\næ™šä¸Šï¼Œæˆ‘ç¡åœ¨é¯¨é­šæ± æ—çš„åœ°æ¿ä¸Šã€‚æˆ‘çœ‹è‘—é¯¨é­šåœ¨æ°´ä¸­è·³èˆå¹¾åˆ†é˜ï¼Œç„¶å¾Œå°±ç¡è‘—äº†ã€‚é€™æ¬¡å†’éšªè®“æˆ‘é«”æœƒåˆ°äº†æµ·æ´‹ç”Ÿç‰©ä¹‹ç¾ã€‚"
            }
        ];

        // --- STATE & LOGIC ---
        let state = {
            questions: [],
            idx: 0,
            score: 0,
            answers: [],
            startTime: 0,
            timer: null,
            mode: 'vocab'
        };

        function showDashboard() {
            switchView('view-dashboard');
            document.getElementById('bar-fill').style.width = '0%';
            clearInterval(state.timer);
        }

        function switchView(viewId) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            window.scrollTo(0, 0);
        }

        function filterStudy(btn, type) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            renderStudy(type);
        }

        function startStudy() {
            switchView('view-study');
            renderStudy('all');
        }

        function renderStudy(type) {
            const container = document.getElementById('study-content');
            container.innerHTML = '';

            if (type === 'all' || type === 'article') {
                articles.forEach(art => {
                    const div = document.createElement('div');
                    div.className = 'article-box liquid-card';
                    div.innerHTML = `
                        <div class="art-t">${art.title}</div>
                        <div class="art-p">${art.text}</div>
                        <div class="art-tr">${art.translation}</div>
                    `;
                    container.appendChild(div);
                });
            }

            if (type === 'all' || type === 'vocab') {
                const all = [...vocabBank, ...clozeBank];
                const unique = all.filter((v,i,a)=>a.findIndex(t=>(t.correctWord === v.correctWord))===i);
                
                unique.forEach(item => {
                    const row = document.createElement('div');
                    row.className = 'list-item';
                    const sentence = item.text.replace('______', `<span style="text-decoration:underline;color:var(--accent-cyan)">${item.correctWord}</span>`);
                    row.innerHTML = `
                        <div style="display:flex; align-items:baseline;">
                            <span class="word-h">${item.correctWord}</span>
                            <span class="word-trans">${item.wordTrans}</span>
                        </div>
                        <div class="word-sent">${sentence}</div>
                    `;
                    container.appendChild(row);
                });
            }
        }

        function startQuiz(mode) {
            state.mode = mode;
            let source = [];
            if(mode === 'vocab') source = vocabBank;
            else if(mode === 'cloze') source = clozeBank;
            else if(mode === 'comp') source = compBank;

            state.questions = JSON.parse(JSON.stringify(source));
            for (let i = state.questions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [state.questions[i], state.questions[j]] = [state.questions[j], state.questions[i]];
            }

            state.idx = 0;
            state.score = 0;
            state.answers = [];
            state.startTime = Date.now();
            
            document.getElementById('q-total').innerText = state.questions.length;
            switchView('view-quiz');
            startTimer();
            loadQuestion();
        }

        function loadQuestion() {
            if (state.idx >= state.questions.length) {
                endQuiz();
                return;
            }

            const q = state.questions[state.idx];
            document.getElementById('q-current').innerText = state.idx + 1;
            
            const pct = (state.idx / state.questions.length) * 100;
            document.getElementById('bar-fill').style.width = `${pct}%`;

            const box = document.getElementById('question-box');
            box.classList.remove('exiting');
            void box.offsetWidth;

            box.innerHTML = `
                <div class="question-card">
                    <div class="q-text">${q.text}</div>
                    <button class="trans-btn" onclick="this.nextElementSibling.style.display='block';this.style.display='none'">é¡¯ç¤ºä¸­æ–‡ç¿»è­¯</button>
                    <div class="trans-text">${q.translation}</div>
                </div>
                <div class="options-container">
                    ${q.options.map((opt, i) => `
                        <div class="opt-btn" onclick="handleAnswer(${i})">
                            <div class="opt-marker"></div>
                            <span>${opt}</span>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function handleAnswer(choiceIdx) {
            const q = state.questions[state.idx];
            const btns = document.querySelectorAll('.opt-btn');
            
            btns.forEach(b => b.onclick = null);

            const isCorrect = (choiceIdx === q.answer);
            if (isCorrect) state.score++;

            if (isCorrect) {
                btns[choiceIdx].classList.add('selected', 'correct');
            } else {
                btns[choiceIdx].classList.add('selected', 'wrong');
                btns[q.answer].classList.add('correct');
            }

            state.answers.push({ q, choiceIdx, isCorrect });

            const box = document.getElementById('question-box');
            setTimeout(() => {
                box.classList.add('exiting');
                setTimeout(() => {
                    state.idx++;
                    loadQuestion();
                }, 250); 
            }, 1000);
        }

        function startTimer() {
            clearInterval(state.timer);
            const el = document.getElementById('timer');
            state.timer = setInterval(() => {
                const diff = Math.floor((Date.now() - state.startTime) / 1000);
                const m = String(Math.floor(diff / 60)).padStart(2, '0');
                const s = String(diff % 60).padStart(2, '0');
                el.innerText = `${m}:${s}`;
            }, 1000);
        }

        function endQuiz() {
            clearInterval(state.timer);
            document.getElementById('bar-fill').style.width = '100%';
            
            const final = Math.round((state.score / state.questions.length) * 100);
            document.getElementById('final-score').innerText = final;
            
            const diff = Math.floor((Date.now() - state.startTime) / 1000);
            document.getElementById('time-taken').innerText = `ç¸½è€—æ™‚: ${Math.floor(diff/60)}åˆ† ${diff%60}ç§’`;

            const container = document.getElementById('mistake-container');
            container.innerHTML = '';
            
            const wrong = state.answers.filter(a => !a.isCorrect);
            if (wrong.length === 0) {
                container.innerHTML = '<div style="color:var(--success); text-align:center; padding:20px;">å¤ªå¼·äº†ï¼å…¨å°ï¼</div>';
            } else {
                wrong.forEach(w => {
                    const item = document.createElement('div');
                    item.className = 'mistake-card';
                    item.innerHTML = `
                        <div style="font-weight:600; color:#fff; margin-bottom:5px;">${w.q.text}</div>
                        <div style="font-size:0.9rem; color:var(--text-secondary); margin-bottom:8px;">${w.q.translation}</div>
                        <div style="font-size:0.9rem;">
                            <span style="color:var(--error)">ä½ çš„ç­”æ¡ˆ: ${w.q.options[w.choiceIdx]}</span><br>
                            <span style="color:var(--success)">æ­£ç¢ºç­”æ¡ˆ: ${w.q.options[w.q.answer]}</span>
                        </div>
                    `;
                    container.appendChild(item);
                });
            }

            switchView('view-result');
        }

        function retryQuiz() {
            startQuiz(state.mode);
        }
    </script>
</body>

</html>
